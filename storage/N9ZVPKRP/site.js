function clearText(a){j$("#"+a).val("")}function _void(){return!1}function changeTypeToPassword(a,b){j$("#"+a+"password-txt-span").hide(),j$("#"+a+"password-hidden-span").show(),j$("#"+b).focus()}function changeTypeToText(a,b){var c=j$.trim(j$("#"+b).val());c.length<=0&&(j$("#"+a+"password-txt-span").show(),j$("#"+a+"password-hidden-span").hide())}function showLoadingImageText(a){j$("#"+a).show(),j$("#"+a+"-Text").hide(),loadingImgTimer=setTimeout(function(){j$("#"+a+"-DefaultText").hide(),j$("#"+a+"-Text").show()},1e4)}function hideLoadingImageText(a){j$("#"+a).hide(),j$("#"+a+"-Text").hide(),j$("#"+a+"-DefaultText").hide(),clearTimeout(loadingImgTimer)}function setObSSOCookieService(a,b){var c=IBP_MEMBEER_SIGNIN_TIME_WAIT_IN_MILLIES;(null==c||void 0==c||0>=c)&&(c=800),setTimeout(function(){a_authenticateUserByJsonp(a,b)},c)}function loadSSOJs(){if(IBP_WS_ENABLED_FLAG)for(var a=IBP_WS_ASSETS+"/ieee-mashup/js",b=["/common/jquery.json-2.2.min.js","/common/jquery.cookie.js","/auth/ieee-auth-constants.js","/auth/ieee-auth-include.js","/common/postmessage.js"],c=0;c<b.length;c++)j$.getScript(a+b[c],function(){})}function redirectToWayf(){var a;a=j$.urlParam("url"),"0"==a&&(a=null==window.parent?window.location.href:window.parent.location.href),a.indexOf("guesthome.jsp")>=0&&(a="/Xplore/home.jsp"),a=j$.URLEncode(a),null==window.parent?window.location.href="/servlet/wayf.jsp?url="+a:window.parent.location.href="/servlet/wayf.jsp?url="+a}function attemptMergeCart(){if(!cartCookieRequested&&IS_INDIVIDUAL_USER){var a=0;abortTimer();{j$.ajax({url:"/xpl/mwGetIeeeUserInfo.jsp",method:"POST",cache:!1,timeout:28e3,async:!1,data:{}}).responseText}cartCookie=j$.cookie("ieeeUserInfoCookie"),null!=cartCookie&&cartCookie.length>0?(cartCookieObj=j$.parseJSON(cartCookie),cartCookieObj.cartItemQty&&(a=cartCookieObj.cartItemQty),j$("#cartCount").html("Cart&nbsp;("+a+")"),1==isFunction("mc_forceRefreshMiniCart")&&mc_forceRefreshMiniCart()):j$("#cartCount").html("Cart&nbsp;(0)"),cartCookieRequested=!0}else j$("#cartCount").html("Cart&nbsp;(0)")}function cartBoxCheck(){var a=j$(".mc-product-cart");a&&(a.find(".mc-header").length?a.hasClass("box")||a.addClass("box box-style-4"):a.removeClass("box box-style-4"))}function repaintWrapper(){j$(".mc-header").length?j$("#flt-container").ibpFloatVertical({bottomCollisionId:"FooterWrapper"}):j$("#flt-container").unbind("cartScroll").attr("style","")}function setCurrentCartCount(){var a=0;if(cartBoxCheck(),null!=j$&&null!=j$.cookie)if(cartCookie=j$.cookie("ieeeUserInfoCookie")){-1==cartCookie.indexOf("userInfoId")&&attemptMergeCart();var b=j$.parseJSON(cartCookie);b.cartItemQty&&(a=b.cartItemQty),j$("#cartCount").html("Cart("+a+")")}else attemptMergeCart()}function abortTimer(){clearInterval(tid)}function fixWebKitInheritanceBug(a){Prototype.Browser.OldWebKit&&(a.prototype.constructor=a)}function $$S(){var a=$A(arguments),b=a.shift();return Selector.findChildElements(b,a)}function $FE(a,b){if("string"==typeof a&&"string"==typeof b){var c=document.forms[a]||$$("FORM#"+a)[0],d=c.elements[b];return c&&d?d:null}}function createCSS(a,b){var c=navigator.userAgent.toLowerCase(),d=/msie/.test(c)&&!/opera/.test(c)&&/win/.test(c),e=document.createElement("style");if(e.setAttribute("type","text/css"),e.setAttribute("media","screen"),d||e.appendChild(document.createTextNode(a+" {"+b+"}")),document.getElementsByTagName("head")[0].appendChild(e),d&&document.styleSheets&&document.styleSheets.length>0){var f=document.styleSheets[document.styleSheets.length-1];"object"==typeof f.addRule&&f.addRule(a,b)}}function SLIDE_toggle(a,b){b&&(SLIDE_count=b),"SLIDE_pause"==a.id?(SLIDE_pause(),a.id="SLIDE_play"):(a.id="SLIDE_pause",SLIDE_play())}function SET_SLIDE_actual(a){SLIDE_actual=a}function SLIDE_play(){SLIDE_actual++,SLIDE_slide(),SLIDE_status="SLIDE_play",SLIDE_timeout=setTimeout("SLIDE_play()",SLIDE_speed)}function SLIDE_pause(){clearTimeout(SLIDE_timeout),SLIDE_status="SLIDE_pause"}function SLIDE_back(){clearTimeout(SLIDE_timeout),SLIDE_actual--,SLIDE_slide(),"SLIDE_pause"!=SLIDE_status&&(SLIDE_timeout=setTimeout("SLIDE_play()",SLIDE_speed))}function SLIDE_forward(){clearTimeout(SLIDE_timeout),SLIDE_actual++,SLIDE_slide(),"SLIDE_pause"!=SLIDE_status&&(SLIDE_timeout=setTimeout("SLIDE_play()",SLIDE_speed))}function SLIDE_slide(){for(SLIDE_actual>SLIDE_count&&(SLIDE_actual=1),1>SLIDE_actual&&(SLIDE_actual=SLIDE_count),i=1;SLIDE_count>=i;i++)i==SLIDE_actual?document.getElementById&&(document.getElementById("highlight"+i).style.display="",document.getElementById("li-highlight"+i).className="selected"):document.getElementById&&(document.getElementById("highlight"+i).style.display="none",document.getElementById("li-highlight"+i).className="")}function SLIDE_speeds(a){SLIDE_speed=a.options[a.selectedIndex].value}function toggleDivVisibility(divName){document.getElementById?document.getElementById(divName).style.display="block"==document.getElementById(divName).style.display?"none":"block":document.layers?eval("document."+divName+".display")="block"==eval("document."+divName+".display")?"none":"block":eval("document.all."+divName+".style.display")="block"==eval("document.all."+divName+".style.display")?"none":"block"}function a_authenticateUserByJsonp(a,b){a_authenticateUser(a,b)}function stopCrossSiteScripting(a){return a=a.replace("<script>",""),a=a.replace("<script",""),a=a.replace("</script",""),a=a.replace("</script>",""),a=a.replace("fromCharCode",""),a=a.replace("http",""),a=a.replace("https",""),a=a.replace("iframe","")}function initEasyXdm(){xhr=new easyXDM.Rpc({swf:XPLORE_SSL_HOST+"/assets/easyxdm/easyxdm.swf",container:"iframeContainer",props:{style:{width:"20px",height:"20px",background:"white",allowTransparency:"true",marginwidth:"0",marginheight:"0",frameborder:"0",margin:"0",border:"0px"}},remote:XPLORE_SSL_HOST+"/assets/easyxdm/cors/",onReady:function(){}},{remote:{request:{}}})}!function(a,b){var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this);var Xplore=Xplore||(Xplore={});if(Xplore.config={THROTTLE_DELAY:1e3,DEBOUNCE_THRESHOLD:1e3},!j$)var j$=jQuery.noConflict();jQuery(function(){jQuery.support.placeholder=!1,test=document.createElement("input"),"placeholder"in test&&(jQuery.support.placeholder=!0)});var tid,loadingImgTimer;hoverOptionsClass={swipe:function(a,b){b?new Effect.BlindDown(a,{duration:.3}):new Effect.BlindUp(a,{duration:.3})},init:function(){curswipe="",$("singleSignOnFlyout")&&$("singleSignOnFlyout").observe("mouseover",function(){$("singleSignOnFlyout").style.display="block",$("singleSignOnFlyout").style.width="520px"}),$("singleSignOnClose")&&($("singleSignOnClose").observe("click",function(a){a.stop(),$("singleSignOnFlyout").style.display="none"}),$("singleSignOnClose").observe("keypress",function(a){13==a.keyCode&&(a.stop(),$("singleSignOnFlyout").style.display="none",$("singleSignOnLink").focus())}))}},Event.observe(window,"load",hoverOptionsClass.init,!1),j$("document").ready(function(){j$.support.placeholder||j$("label.overlabel").overlabel(),j$("#subscribed").click(function(){j$("#openAccess").attr("checked",!1)}),j$("#openAccess").click(function(){j$("#subscribed").attr("checked",!1)}),j$("#subscribed-content").click(function(){j$("#open-access").attr("checked",!1)}),j$("#open-access").click(function(){j$("#subscribed-content").attr("checked",!1)}),j$(function(){var a=j$("#save-to-project-button"),b=!1;j$("#search_results_form input[type=checkbox]").add("#tocresultform input[type=checkbox]").each(function(){return j$(this).is(":checked")?void(b=!0):void 0}),0==b?a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project-disabled.gif").attr("disabled","disabled").attr("class","button disabled"):a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project.gif").attr("class","button disabled"),j$("#search_results_form input[type=checkbox], #tocresultform input[type=checkbox]").bind("click",function(){if(j$(this).is(":checked"))a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project.gif").removeAttr("disabled").attr("class","button");else{var b=!1;j$("#search_results_form input[type=checkbox]").add("#tocresultform input[type=checkbox]").each(function(){return j$(this).is(":checked")?void(b=!0):void 0}),0==b&&a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project-disabled.gif").attr("disabled","disabled").attr("class","button disabled")}}),j$("#select-all").bind("click",function(){a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project.gif").removeAttr("disabled").attr("class","button")}),j$("#deselect-all").bind("click",function(){a.attr("src",ASSETS_RELATIVE_PATH+"/img/save-project-disabled.gif").attr("disabled","disabled").attr("class","button disabled")})}),j$("#tagSortType").bind("change",function(){var a="#tagSortType",b=(j$(a).find(":selected").val(),function(){var a=[],b="",c="",d="",e=j$(".tags-container li");return e.each(function(){var e=j$(this),f={};b=e.find(".tag-name").html(),c=e.find(".tag-count").html(),d=e.find("a").attr("href"),f.name=b,f.count=c,f.link=d,a.push(f)}),a}),c=function(a,b){return a.name<b.name?-1:a.name>b.name?1:0},d=function(a,b){return+b.count-+a.count},e=function(a){var b="";return a.each(function(a){var c=a.link,d=a.name,e=a.count;b=b+'<li><a href="'+c+'"><span class="tag-name">'+d+'</span>(<span class="tag-count">'+e+"</span>)</a></li>"}),b},f=new Array;f=b(),"tag_count"==j$(this).attr("value")?(objCountSorted=f.sort(d),j$(".tags-container ul").html(e(objCountSorted))):(objNameSorted=f.sort(c),j$(".tags-container ul").html(e(objNameSorted)))}),jQuery(".quick-abstract-btn").click(function(){var a=jQuery(this),b=a.attr("title"),c=a.find("img").attr("src"),d=b.indexOf("Reveal")>0?b.replace("Reveal","Close"):b.replace("Close","Reveal"),e=c.indexOf("collapsed")>0?c.replace("collapsed","expanded"):c.replace("expanded","collapsed");a.attr("title",d),a.find("img").attr("src",e),a.find("img").attr("title",d),a.closest(".reveal-section").find(".abstract").slideToggle(500)})}),j$.subscribe("/mod/tags/sort",function(){var a=Xplore.projects.tagsList.getTagsObj(),b=Xplore.templates.tagList,c=j$(".tags-container ul"),d=j$.map(a,function(a){return b.replace(/\{\{recordId\}\}/g,a.tag_id).replace(/\{\{tag_count\}\}/g,a.count).replace(/\{\{tag_name\}\}/g,a.name)}).join("");c.html(d),j$("#tagSortType").change()}),j$(function(){j$(".authorPreferredName_Off").qtip({content:{text:function(){var a=j$(this).attr("title"),b=j$(this).find("#authorAffiliations").attr("class");if(alias=[],aliasList="",a||b){var c="";if(a&&(a=a.slice(0,-3),alias=a.split("|c|"),alias.sort(),j$.each(alias,function(){return aliasList=aliasList+"<li>"+this+"</li>"}),c='<div class="overlay-label">Also Known As:</div><div class="aliases"><ul>'+aliasList+"</ul></div>"),b){var d="",e=[];b=b.slice(0,-3),e=b.split("|c|");var f=j$(e).size();j$.each(e,function(a,b){return 1==f?d=d+"<li>"+b+"</li>":(d=d+"<li>"+b,f-1>a&&(d+=";</li>")),d}),c=c+'<br/><div class="overlay-label">Affiliations:</div><div class="aliases"><ul>'+d+"</ul></div>"}return c}}},position:{my:"bottom middle",at:"top middle"},style:{width:"300px",classes:"qtip-lightIeee"}}),j$(".mw-contAdmin").qtip({content:{text:j$("#contAdminWindowContent")},show:{event:"click"},hide:{fixed:!0,event:"unfocus"},position:{my:"top left",at:"bottom left",adjust:{x:2,y:2}},style:{width:"auto",classes:"qtip-lightIeee",tip:!1},events:{render:function(){var a=j$(this);a.delegate(".mwclose","click",function(){a.qtip("hide")})}}}),j$("#singleSignOnLink").click(function(){return loadSSOJs(),j$("#modalWindowSignInError281").hide(),j$("#loadingImg").hide(),j$("#singleSignOnFlyout").slideDown(0),j$("#singleSignOnLink2").focus(),!1}),j$("#AuthTools .SubMenu a").width(j$("#SignOutFlyOutLink").width()-20>90?j$("#SignOutFlyOutLink").width()-20:90),IBP_WS_ENABLED_FLAG&&setCurrentCartCount()});var iFrame=new Element("iframe").setStyle({display:"none",height:"auto",width:"auto","z-index":"9",position:"relative"}),cartCookieRequested=!1;j$.urlParam=function(a){var b=new RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return b?decodeURIComponent(b[1].replace(/\+/g," "))||0:0},j$.extend({URLEncode:function(a){var b="",c=0;a=a.toString();for(var d=/(^[a-zA-Z0-9_.]*)/;c<a.length;){var e=d.exec(a.substr(c));if(null!=e&&e.length>1&&""!=e[1])b+=e[1],c+=e[1].length;else{if(" "==a[c])b+="+";else{var f=a.charCodeAt(c),g=f.toString(16);b+="%"+(g.length<2?"0":"")+g.toUpperCase()}c++}}return b},URLDecode:function(a){for(var c,d=a,e=/(%[^%]{2})/;null!=(m=e.exec(d))&&m.length>1&&""!=m[1];)b=parseInt(m[1].substr(1),16),c=String.fromCharCode(b),d=d.replace(m[1],c);return d}}),Prototype.Browser.IE6||(Prototype.Browser.IE6=function(){return/msie 6/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&/win/i.test(navigator.userAgent)}()),Prototype.Browser.IE7||(Prototype.Browser.IE7=function(){return/msie 7/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&/win/i.test(navigator.userAgent)}()),Prototype.Browser.OldWebKit||(Prototype.Browser.OldWebKit=function(){var a=navigator.userAgent.match(/AppleWebKit\/(\d+)/);return a&&2==a.length?parseInt(a[1])<=419:!1}()),Element.addMethods({scrollDiv:function(a,b,c){a=$(a),a.scrollLeft=b,a.scrollTop=c},shiftAttribute:function(a,b,c){return a=$(a),a[b]=a[c],a},getDimensions:function(a){a=$(a);var b=$(a).getStyle("display");if("none"!=b&&null!=b)return{width:a.offsetWidth,height:a.offsetHeight};var c=a.style,d=c.visibility,e=c.position,f=c.display;c.visibility="hidden",c.position="absolute",c.display="block";var g=a.clientHeight,h=a.clientWidth;if(c.width.empty()){var i=a.ancestors().find(function(a){return a.clientWidth>0},this);a.setStyle({width:i.clientWidth-parseInt(a.getStyle("padding-left"))+parseInt(a.getStyle("padding-right"))+"px"}),g=a.clientHeight-(parseInt(a.getStyle("padding-top"))+parseInt(a.getStyle("padding-bottom"))),a.setStyle({width:"auto"})}return c.display=f,c.position=e,c.visibility=d,{width:h,height:g}}}),Object.extend(document.viewport,{getDimensions:function(){var a={},b=Prototype.Browser;return $w("width height").each(function(c){var d=c.capitalize();a[c]=b.WebKit&&!document.evaluate?self["inner"+d]:b.Opera&&parseFloat(opera.version)<9.5?document.body["client"+d]:document.documentElement["client"+d]}),a}});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}String.prototype.getHash||(String.prototype.getHash=function(){var a=this.indexOf("#");return a>=0?this.substring(a+1):null}),String.prototype.toSlug||(String.prototype.toSlug=function(){return this.gsub(/['"]/,"").gsub(/[^A-Za-z0-9]/," ").strip().gsub(/ +/,"-").toLowerCase()});var PageWidget=Behavior.create({initialize:function(a){this.setOptions(a)},setOptions:function(a){this.CONFIG=Object.extend(Object.clone(this.constructor.CONFIG),a||{})}});PageWidget.CONFIG={},document.observe("dom:loaded",function(){function a(){$A(this.options).each(function(a){$(a).disabled&&(a.selected=!1)})}$$("SELECT").each(function(b){Event.observe(b,"change",a.bind(b))})}),(Prototype.Browser.IE||Prototype.Browser.WebKit)&&document.observe("dom:loaded",function(){$$("LABEL IMG").each(function(a){var b=$(a.parentNode.getAttribute("for")&&a.parentNode.attributes["for"].nodeValue());b&&a.observe("click",function(){b.focus()})})});var AdvancedSearch=Behavior.create(PageWidget,{initialize:function(a){this.setOptions(a),this.primary_fields=this.element.select(this.CONFIG.primrary_fields_selector),this.search_interface=$(this.CONFIG.search_interface),this.srchIntElements=this.search_interface.select("input");for(var b=0;b<this.srchIntElements.length;b++){var c=this.srchIntElements[b];c.observe("click",this.srchInterfaceRadioClickHandler.bindAsEventListener(this,c)),c.checked&&this.srchInterfaceRadioClickHandler(null,c)}this.primary_fields.length<1||(this.add_new_line=$(this.CONFIG.add_new_line_id),this.reset_all_fields=$(this.CONFIG.reset_all_fields_id),this.element.select(".Invisible").invoke("removeClassName","Invisible"),this.primary_fields.first().select(".button").invoke("remove"),this.primary_fields.first().select("select").last().insert({after:'<span style="display:inline-block; width: 56px"></span>'}),this.primary_fields.each(function(a){this.initializePrimaryField(a)},this),this.add_new_line.observe("click",this.addNewPrimaryFieldClickHandler.bindAsEventListener(this)),this.reset_all_fields.observe("click",this.resetAllFieldsClickHandler.bindAsEventListener(this)))},initializePrimaryField:function(a){var b=Element.extend(jQuery(a).find(this.CONFIG.move_field_button_selector)[0]),c=a.getElementsByTagName("SELECT");if(c.length>1&&b){b.observe("click",this.moveFieldUpClickHandler.bindAsEventListener(this,b));var d=b.next("IMG");d&&d.observe("click",this.removeLineClickHandler.bindAsEventListener(this,d))}else b&&(b.addClassName(this.CONFIG.move_field_disabled_button_class).src=this.CONFIG.disabled_button_image)},addNewPrimaryFieldClickHandler:function(){this.addNewPrimaryField()},srchInterfaceRadioClickHandler:function(a,b){var c=this.primary_fields[0],d=c.childElements(),e=d[1].childElements()[1];e.options[0].text=b.value,e.options[0].value="";for(var f=1;f<this.primary_fields.length;f++)c=this.primary_fields[f],d=c.childElements(),e=d[2].childElements()[1],e.options[0].text=b.value,e.options[0].value=""},moveFieldUpClickHandler:function(a,b){b.hasClassName(this.CONFIG.move_field_disabled_button_class)||this.moveFieldUp(a,b)},removeLineClickHandler:function(a,b){var c=b.up(),d=this.primary_fields.indexOf(c);d>=0&&(this.primary_fields.splice(d,1),c.remove())},resetAllFieldsClickHandler:function(){this.resetAllFields()},prepareNewPrimaryFieldTemplate:function(){var a=this.primary_fields.length+1;return this.new_field_template=this.primary_fields.last().cloneNode(!0),this.new_field_template.innerHTML.replace(/(name|id|for)\=\"?(\w+_)\d+\"?/g,'$1="$2'+a+'"')},addNewPrimaryField:function(){if(!(this.primary_fields.length>10)){var a=new Element("p",{"class":"field-group"}).update(this.prepareNewPrimaryFieldTemplate());a.addClassName("field-group"),j$(a).find('select[id^="searchin"] option:first').html(j$("#search-interface").find("input:checked").attr("value")),this.primary_fields.last().insert({after:a}),jQuery(a).find(".field:nth(1) input").val(""),this.primary_fields.push(a),this.initializePrimaryField(a)}},moveFieldUp:function(a,b){var c=b.up(),d=c.previous(c.previousSiblings().length-1),e=c.getElementsByTagName("SELECT"),f=d.select("SELECT");f.length>1&&this.swapSelectMenu(e[0],f[0]),this.swapTextField(c.down("INPUT"),d.down("INPUT")),this.swapSelectMenu(e[1],f.last())},swapTextField:function(a,b){var c=$F(b);b.value=$F(a),a.value=c},swapSelectMenu:function(a,b){var c=b.selectedIndex;b.selectedIndex=a.selectedIndex,a.selectedIndex=c},resetAllFields:function(){var a=$("AdvancedSearchPage");a.select("input[type=text]").each(function(a){a.clear()}),a.select("input[type=checkbox]").each(function(a){a.checked=!1}),a.select("select").each(function(a){a.selectedIndex=0})}});AdvancedSearch.CONFIG={disabled_button_image:ASSETS_RELATIVE_PATH+"/img/icon.to-top.disabled.gif",conditional_prefix:"op",term_prefix:"query",search_interface:"search-interface",primrary_fields_selector:".primary-fields .field-group",add_new_line_id:"add-new-line",reset_all_fields_id:"reset-all-fields",move_field_button_selector:"IMG.button",move_field_disabled_button_class:"disabled"},Event.addBehavior({".advanced-search .primary-search":AdvancedSearch});var AjaxImageSubmit=Behavior.create(PageWidget,{initialize:function(a){this.ajax_form=this.element.up("FORM"),this.ajax_form&&"input"!=!this.element.tagName.toLowerCase()&&(this.setOptions(a),this.replaceInputElement(),this.trigger_observer=this.clickHandler.bindAsEventListener(this),this.element.observe("mousedown",this.trigger_observer),this.click_handler_callback=this.CONFIG.click_callback.bind(this),this.success_handler_callback=this.CONFIG.success_handler.bind(this),this.failure_handler_callback=this.CONFIG.failure_handler.bind(this),this.parameters=this.CONFIG.ajax_parameters)},replaceInputElement:function(){var a=new Element("IMG",{id:this.element.id,"class":this.element.className,src:this.element.src});this.element.insert({after:a}).remove(),this.element=a},clickHandler:function(a){a.stop(),this.submitAjaxForm(),this.click_handler_callback()},submitAjaxForm:function(){var a=this.ajax_form.action;new Ajax.Request(a,{method:this.ajax_form.method,evalJSON:"force",parameters:this.parameters,onSuccess:this.successHandler.bind(this),onFailure:this.failureHandler.bind(this)})},successHandler:function(a){this.validateResponseJSON(a)&&(this.success_handler_callback(),this.toggleTriggerImage())},failureHandler:function(){this.element.stopObserving("click",this.trigger_observer),this.failure_handler_callback()},validateResponseJSON:function(a){if(!this.CONFIG.require_json_validation)return!0;try{return a.responseJSON[this.CONFIG.valid_json_key]==this.CONFIG.valid_json_value?!0:!1}catch(b){return!1}},toggleTriggerImage:function(){this.CONFIG.trigger_image_1.empty()||this.CONFIG.trigger_image_2.empty()||(this.element.src=this.element.src.split("/").last()==this.CONFIG.trigger_image_1.split("/").last()?this.CONFIG.trigger_image_2:this.CONFIG.trigger_image_1)}});AjaxImageSubmit.CONFIG={ajax_parameters:{},trigger_image_1:"",trigger_image_2:"",require_json_validation:!1,valid_json_key:"",valid_json_value:"",click_callback:Prototype.emptyFunction,success_handler:Prototype.emptyFunction,failure_handler:Prototype.emptyFunction},Event.addBehavior({"#save-this-search-button1":AjaxImageSubmit({require_json_validation:!1,valid_json_key:"response",valid_json_value:!0,trigger_image_1:ASSETS_RELATIVE_PATH+"/img/btn.save-this-search.gif",trigger_image_2:ASSETS_RELATIVE_PATH+"/img/btn.search-saved.gif"}),"#set-alert-on-this-search":AjaxImageSubmit({trigger_image_1:ASSETS_RELATIVE_PATH+"/img/btn.set-alert-on-search.gif",trigger_image_2:ASSETS_RELATIVE_PATH+"/img/btn.set-alert.alert-set.gif"}),"#set-alert-on-this-journal":AjaxImageSubmit({trigger_image_1:ASSETS_RELATIVE_PATH+"/img/btn.alert-on-journal.gif",trigger_image_2:ASSETS_RELATIVE_PATH+"/img/btn.alert-on-journal-set.gif"}),"#favorite-journal":AjaxImageSubmit({trigger_image_1:ASSETS_RELATIVE_PATH+"/img/btn.favorite-journal.gif",trigger_image_2:ASSETS_RELATIVE_PATH+"/img/btn.journal-favorited.gif"})});var BrowseBySubject=Behavior.create(PageWidget,{initialize:function(a){this.setOptions(a),this.data_list=$("subjects-data-list"),this.data_list&&(this.column_wrapper=$("column-wrapper"),this.column_width=this.CONFIG.column_width,this.selected_subjects=[],this.expanded_subjects={},this.initializeSubjectList(this.data_list))},initializeSubjectList:function(a){var b=a.select(this.CONFIG.category_selector),c=a.down(".ExpandableList").childElements().length;b.each(function(a){a.down("a").shiftAttribute("title","href").removeAttribute("href"),a.observe("click",this.selectExpandableSubjectClickHandler.bindAsEventListener(this,a))},this),1==c&&(b[0].shiftAttribute("title","href").removeAttribute("href"),this.expandSubject(!1,b[0]))},selectExpandableSubjectClickHandler:function(a,b){this.expandSubject(a,b)},expandSubject:function(a,b){if(!b.hasClassName("Active")){this.scollToCorrectColumn(b),this.toggleColumnWrapperWidth(!0);var c=b.down(".Collapsed");this.column_wrapper.insert({bottom:c}),this.expanded_subjects[c.id]=b.id,b.addClassName("Active").down("A").shiftAttribute("href","title"),c.removeClassName("Collapsed").addClassName("Expanded"),a&&a.stop()}},scollToCorrectColumn:function(a){var b=a.ancestors(),c=a.up(".Column").nextSiblings();c.each(function(a){a.hasClassName("Expanded")&&!b.include(a)&&this.removeColumn(a)},this)},toggleColumnWrapperWidth:function(a){this.column_width=a?this.column_width+200:this.column_width-200,this.column_wrapper.setStyle({width:this.column_width+"px"}),this.data_list.scrollDiv(this.column_width,0)},removeColumn:function(a){var b=$(this.expanded_subjects[a.id]);b.insert({bottom:a}).removeClassName("Active").down("A").removeAttribute("href"),a.removeClassName("Expanded").addClassName("Collapsed"),this.toggleColumnWrapperWidth(!1)}});BrowseBySubject.CONFIG={column_width:200,category_selector:".Expandable"},Event.addBehavior({"#browse-by-subject":BrowseBySubject});var DHTMLMenu=Behavior.create(PageWidget,{initialize:function(a){this.setOptions(a),this.submenus={},this.element.immediateDescendants().each(function(a){a.observe("mouseover",this.mouseoverHandler.bindAsEventListener(this,a)),a.observe("click",this.clickHandler.bindAsEventListener(this,a)),a.observe("mouseout",this.mouseoutHandler.bindAsEventListener(this,a)),this.submenus[a.id]=a.down().next(),void 0==this.submenus[a.id]&&a.select("UL").length>0&&(this.submenus[a.id]=a.down("UL"))},this)},initialized:!1,menu_hide_timeout:null,menu_show_timeout:null,last_menu_on:null,mouseoverHandler:function(a,b){clearTimeout(this.menu_hide_timeout),clearTimeout(this.menu_show_timeout),null==this.last_menu_on?this.menu_show_timeout=setTimeout(this.showMenu.bind(this,b),this.CONFIG.menu_show_time):this.last_menu_on!=b&&this.showMenu(b)},clickHandler:function(a,b){clearTimeout(this.menu_hide_timeout),clearTimeout(this.menu_show_timeout),null==this.last_menu_on?this.menu_show_timeout=setTimeout(this.showMenu.bind(this,b),this.CONFIG.menu_show_time):this.last_menu_on!=b?this.showMenu(b):this.element.down("#browse-content .SubMenu")?"block"==this.element.down("#browse-content .SubMenu").getStyle("display")&&"block"==$("byTopicFlyout").getStyle("display")||(this.submenus[b.id]?this.menu_hide_timeout=setTimeout(this.hideMenu.bind(this,b),this.CONFIG.menu_hide_time):this.hideMenu(b)):this.submenus[b.id]?this.menu_hide_timeout=setTimeout(this.hideMenu.bind(this,b),this.CONFIG.menu_hide_time):this.hideMenu(b)},mouseoutHandler:function(a,b){clearTimeout(this.menu_hide_timeout),clearTimeout(this.menu_show_timeout),this.element.down("#browse-content .SubMenu")?"block"==this.element.down("#browse-content .SubMenu").getStyle("display")&&"block"==$("byTopicFlyout").getStyle("display")||(this.submenus[b.id]?this.menu_hide_timeout=setTimeout(this.hideMenu.bind(this,b),this.CONFIG.menu_hide_time):this.hideMenu(b)):this.submenus[b.id]?this.menu_hide_timeout=setTimeout(this.hideMenu.bind(this,b),this.CONFIG.menu_hide_time):this.hideMenu(b)},showMenu:function(a){if(null!=this.last_menu_on&&this.hideMenu(this.last_menu_on),a.addClassName(this.CONFIG.hover_class),Prototype.Browser.IE6){var b=this.submenus[a.id];if(b){var c=b.next();b&&!c&&this.createIframe(a,{left:b.offsetLeft+"px",height:b.offsetHeight+"px",width:b.offsetWidth+"px"})}}this.last_menu_on=a},hideMenu:function(a){if(null!=a){if(a.removeClassName(this.CONFIG.hover_class),Prototype.Browser.IE6){var b=this.submenus[a.id];if(b){var c=b.next();b&&c&&a.removeChild(c)}}this.last_menu_on=null}},createIframe:function(a,b){new Insertion.Bottom(a,new Template('<iframe class="'+this.CONFIG.iframe_class+'" frameborder="0" scrolling="no" style="width: #{width}; height: #{height}; left: #{left};"></iframe>').evaluate(b))}});DHTMLMenu.CONFIG={submenu_class:"SubMenu",hover_class:"Hover",menu_hide_time:500,menu_show_time:100,iframe_class:"IframeFix"},Event.addBehavior({".DHTMLMenu":DHTMLMenu({menu_hide_time:300})});var ExpertSearch=Behavior.create(PageWidget,{initialize:function(a){if(this.expression=$(a),this.expression){for(this.sortType=$("sortType"),this.rowsPerPage=$("rowsPerPage"),this.search_interface=$("search-interface-epression-builder"),this.srchIntElements=this.search_interface.select("input"),this.element.setStyle({display:"block"}),this.keyValueArray=new Array,this.expOffset=-1,this.filterOpKey="",x=0;2>x;x++)this.initializeDropDownMenu(this.element.down(".DropDown",x));$("reset-all").observe("click",this.resetTextArea.bindAsEventListener(this)),$("submit-search").observe("click",jQuery.debounce(Xplore.config.DEBOUNCE_THRESHOLD,!0,this.submitCommandClickHandler.bindAsEventListener(this))),this.expression.observe("click",this.expressioneEventHandler.bindAsEventListener(this)),this.expression.observe("keyup",this.expressioneEventHandler.bindAsEventListener(this))}},initializeDropDownMenu:function(a){a.select("LI").each(function(a){a.observe("click",this.dropDownItemClickHandler.bindAsEventListener(this,a))},this)},dropDownItemClickHandler:function(a,b){string=b.id.split("-").last(),b.hasClassName("Operator")?(this.filterOpKey="op",this.addItem(b,string)):(this.filterOpKey="srchkey",this.addItem(b,string)),this.expression.focus()},expressioneEventHandler:function(){if(this.expression.selectionStart||"0"==this.expression.selectionStart){{var a=this.expression.selectionStart;this.expression.selectionEnd}this.expOffset=a}else if(document.selection){var b=document.selection.createRange();if(b.text.length>1)return void(-1==this.expOffset);var c="",d=b.duplicate(),e=0;d.moveToElementText(this.expression);{b.text}b.text=c,e=d.text.indexOf(c),b.moveStart("character",-1),b.text="",this.expOffset=e}else this.expOffset=-1},submitCommandClickHandler:function(){if(null==this.expression.value||this.expression.value.length<=0)return void alert("Please enter one or more keywords");for(var a="/search/searchresult.jsp?action=search&"+this.sortType.id+"="+this.sortType.value+"&"+this.rowsPerPage.id+"="+this.rowsPerPage.value+"&matchBoolean=true",b=0;b<this.srchIntElements.length;b++)this.srchIntElements[b].checked&&(a=a+"&searchField="+this.srchIntElements[b].id);a=a+"&queryText=("+this.expression.value+")&newsearch=true",window.location=encodeURI(a)},addItem:function(a,b){if(!(null==b||b.length<1)){"srchkey"==this.filterOpKey&&(b+=":"),this.hideParentMenu(a);var c=$F(this.expression);this.expOffset<0?(this.expression.value=c.endsWith(" ")?c+b:c.empty()?b:c+" "+b,this.expOffset=this.expression.value.length):(this.expression.value=this.expression.value.substring(0,this.expOffset)+" "+b+this.expression.value.substring(this.expOffset,this.expression.value.length),this.expOffset=this.expOffset+b.length+1),this.setSelRange(this.expression,this.expOffset,this.expOffset)}},setSelRange:function(a,b,c){if(this.expression.selectionStart||"0"==this.expression.selectionStart)this.expression.selectionStart=b,this.expression.selectionEnd=c;else if(document.selection)if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}},hideParentMenu:function(a){a.up(".DropDown").removeClassName("Hover")},resetTextArea:function(){this.expression.clear()}});Event.addBehavior({"#expression-tools":ExpertSearch("expression-textarea")});var HoverHighlighter=Behavior.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.highlightable_items=this.element.select(a),this.highlightable_items.size()<1||(this.highlightable_items.each(function(a){a.observe("mouseover",this.itemMouseHandler.bindAsEventListener(this,a,!0)),a.observe("mouseout",this.itemMouseHandler.bindAsEventListener(this,a,!1))},this),this.mouseOverCallback=this.CONFIG.mouseover_callback,this.mouseOutCallback=this.CONFIG.mouseout_callback)},itemMouseHandler:function(a,b,c){c?(b.addClassName(this.CONFIG.hover_class),this.mouseOverCallback()):(b.removeClassName(this.CONFIG.hover_class),this.mouseOutCallback())}});HoverHighlighter.CONFIG={hover_class:"Hover",mouseover_callback:Prototype.emptyFunction,mouseout_callback:Prototype.emptyFunction},Event.addBehavior({"UL.Results":HoverHighlighter("LI"),"#BrowseContent":HoverHighlighter("UL.Browsing > LI"),"UL.Profiles":HoverHighlighter("LI"),"UL.listview-highlight":HoverHighlighter("LI"),"#expression-tools .SubMenu":HoverHighlighter("LI"),"UL.Searches":HoverHighlighter("LI.Hoverable")});var MaintenanceMessage=Behavior.create(PageWidget,{initialize:function(a){this.setOptions(a),this.form_input=this.element.down("INPUT"),this.close_link=this.element.down("SPAN"),this.form_input&&this.close_link&&(this.form_input.setStyle({display:"none"}),this.close_link.setStyle({display:"block"}).observe("click",this.closeClickHandler.bindAsEventListener(this)))
},closeClickHandler:function(){new Ajax.Request(this.element.action,{method:this.element.method,evalJSON:"force",onSuccess:this.closeMaintenanceSuccessHandler.bind(this),onFailure:this.closeMaintenanceFailureHandler.bind(this)})},closeMaintenanceSuccessHandler:function(a){a.responseJSON.response?(new Effect.Fade(this.element.id),new Effect.SlideUp(this.element.id)):this.closeMaintenanceFailureHandler()},closeMaintenanceFailureHandler:function(){this.removeMaintenanceMessage(this.CONFIG.failure_message_text.empty()?!1:!0)},removeMaintenanceMessage:function(a){a?(this.element.innerHTML=this.CONFIG.failure_message_text,new Effect.Fade(this.element.id,{delay:this.CONFIG.failure_message_auto_dismiss_time}),new Effect.SlideUp(this.element.id)):(new Effect.Fade(this.element.id),new Effect.SlideUp(this.element.id))}});MaintenanceMessage.CONFIG={failure_message_text:"",failure_message_auto_dismiss_time:3},Event.addBehavior({"#maintenance-message":MaintenanceMessage({failure_message_text:"Error: Unable to save maintenance message preferences.",failure_message_auto_dismiss_time:1})});var MasterCheckbox=Behavior.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.master_checkbox=$(a),this.checkbox_nodes=this.element.select('input[type="checkbox"]').without(this.master_checkbox),!this.master_checkbox||this.checkbox_nodes.size()<1||(this.masterCheckboxClickHandler(),this.master_checkbox.observe("click",this.masterCheckboxClickHandler.bindAsEventListener(this)),this.checkbox_nodes.each(function(a){a.observe("click",this.checkboxClickHandler.bindAsEventListener(this))},this))},masterCheckboxClickHandler:function(){var a=!0;this.checkbox_nodes.each(this.master_checkbox.checked?function(a){a.checked=!1}:function(b){b.checked&&(a=!1)}),this.checkMasterCheckbox(a)},checkboxClickHandler:function(){this.master_checkbox.checked&&(this.master_checkbox.checked=!1);var a=!0;this.checkbox_nodes.each(function(b){b.checked&&(a=!1)}),this.checkMasterCheckbox(a)},checkMasterCheckbox:function(a){a&&(this.master_checkbox.checked=!0)}});Event.addBehavior({"#choose-sources .layout":MasterCheckbox("select-all-checkboxes")});var NarrowByAuthors=Class.create(PageWidget,{initialize:function(a,b,c,d){this.setOptions(d),this.node=$(a),this.authors_to_select_list=$(this.CONFIG.authors_to_select_list_id),this.selected_authors_list=$(this.CONFIG.selected_authors_list_id),this.node&&this.authors_to_select_list&&this.selected_authors_list&&(this.fetchAuthors("citations",c),this.sorting_by_name=!1,this.selected_authors=[],this.authors_data={},this.selected_authors_input=$(this.CONFIG.selected_authors_input_id),this.select_heading=$(this.CONFIG.select_heading_id),this.most_citations=$(this.CONFIG.most_citations_heading_id),this.sort_by_citations=$(this.CONFIG.sort_by_citations_id),this.sort_by_citations.observe("click",this.setSortAuthorsByCitations.bindAsEventListener(this)),this.sort_by_last_name=$(this.CONFIG.sort_by_last_name_id),this.sort_by_last_name.observe("click",this.setSortAuthorsByLastName.bindAsEventListener(this)),$(this.CONFIG.clear_all_selected_id).observe("click",this.removeAllAuthors.bindAsEventListener(this)),this.narrow_controls=$(this.CONFIG.narrow_controls_wrapper_id),this.narrow_controls.select("A").each(function(a){a.observe("click",this.filterClickHandler.bindAsEventListener(this,a))},this),this.boldAuthorSortingByName(this.sorting_by_name),this.boldFilterList("most citations"))},fetchAuthors:function(a,b){var c="citations"==a?"request=citations":"request="+a;new Ajax.Request("/search/refinements?"+b,{method:"get",parameters:c,evalJSON:"force",onSuccess:this.fetchAuthorsSuccessHandler.bind(this),onFailure:this.fetchAuthorsFailureHandler.bind(this)})},fetchAuthorsSuccessHandler:function(a){var b=a.responseJSON.results;b?this.handleFetchedAuthorData(b):this.fetchAuthorsFailureHandler()},fetchAuthorsFailureHandler:function(){this.node.up().setStyle({display:"none"})},handleFetchedAuthorData:function(a){a.citations?(this.authors_by_citation=a.citations,this.displayBatchOfAuthors(this.authors_by_citation)):($H(a).each(function(a){this.loadAuthorByLastName(a)},this),this.awaiting_letter&&(this.displayBatchOfAuthors(this.authors_data[this.awaiting_letter][1]),this.awaiting_letter=null))},loadAuthorByLastName:function(a){if(!this.authors_data[a.key])for(this.authors_data[a.key]=[],x=0;x<a.length;x++)this.authors_data[a.key].push(a[x])},displayBatchOfAuthors:function(a){this.clearAuthorsToSelectList(),a.each(function(a){this.displayAuthorToSelect(a)},this)},displayAuthorToSelect:function(a){var b=new Element("LI",{id:"author-"+a[0]});b.update("<span itemid="+a[3]+">"+a[1]+" ("+a[2]+")</span>"),this.selected_authors&&this.selected_authors.include(a[0])&&b.addClassName("Selected"),this.authors_to_select_list.insert({bottom:b}),b.observe("click",this.selectAuthorClickHandler.bind(this,b,a[0]))},filterClickHandler:function(a,b){var c=b.innerHTML.toLowerCase();"most citations"==c?(this.filterAuthorsByCitations(),this.select_heading.update("Authors with the Most Citations")):(this.filterAuthorsByLastName(c),this.select_heading.update("Authors by Last Name: "+b.innerHTML)),this.last_clicked=c,this.boldFilterList(c),this.activateSorting(this.sorting_by_name)},filterAuthorsByCitations:function(){this.authors_by_citation?this.displayBatchOfAuthors(this.authors_by_citation):this.fetchAuthors("citations")},filterAuthorsByLastName:function(a){this.authors_data[a]?this.displayBatchOfAuthors(this.authors_data[a][1]):(this.awaiting_letter=a,this.fetchAuthors(a))},selectAuthorClickHandler:function(a,b){this.selectAuthor(b,a)},activateSorting:function(a){a?this.setSortAuthorsByLastName():this.setSortAuthorsByCitations()},setSortAuthorsByCitations:function(){this.sorting_by_name=!1,this.boldAuthorSortingByName(this.sorting_by_name);var a=this.authors_to_select_list.select("LI").sortBy(function(a){return parseInt(a.innerHTML.gsub(/(.*)\((.*)\)(.*)/,"#{2}"))});a.reverse(),this.clearAuthorsToSelectList(),this.displaySortedAuthors(a)},setSortAuthorsByLastName:function(){if(this.sorting_by_name=!0,this.boldAuthorSortingByName(this.sorting_by_name),"most citations"==this.last_clicked)var a=this.authors_to_select_list.select("LI").sortBy(function(a){return a.innerHTML.stripTags().gsub(/(.*)\((.*)\)(.*)/,"#{1}").strip().split(" ").pop().slice(0,1)});else var a=this.authors_to_select_list.select("LI").sortBy(function(a){return a.innerHTML.stripTags().gsub(/(.*)\((.*)\)(.*)/,"#{1}").strip().split(" ").pop().slice(1,2)});this.clearAuthorsToSelectList(),this.displaySortedAuthors(a)},boldAuthorSortingByName:function(a){a?this.sort_by_last_name:this.sort_by_citations;a?(this.sort_by_citations.removeClassName(this.CONFIG.active_filter_class),this.sort_by_last_name.addClassName(this.CONFIG.active_filter_class)):(this.sort_by_last_name.removeClassName(this.CONFIG.active_filter_class),this.sort_by_citations.addClassName(this.CONFIG.active_filter_class))},boldFilterList:function(a){this.narrow_controls.select("A").invoke("removeClassName",this.CONFIG.active_filter_class),"most citations"==a?this.most_citations.addClassName(this.CONFIG.active_filter_class):$("filter-"+a).addClassName(this.CONFIG.active_filter_class)},selectAuthor:function(a,b){this.selected_authors.include(a)||(this.selected_authors.push(a),this.copyAuthorNodeToSelectedList(a,b),this.updateSelectedAuthorsInput(),b.addClassName(this.CONFIG.selected_author_class))},displaySortedAuthors:function(a){a.each(function(a){this.authors_to_select_list.insert({bottom:a})},this)},copyAuthorNodeToSelectedList:function(a,b){var c=new Element("LI");c.update(b.innerHTML),this.selected_authors_list.insert({bottom:c}),c.observe("click",this.removeSelectedAuthor.bind(this,a,c))},removeSelectedAuthor:function(a,b){b.remove(),this.selected_authors=this.selected_authors.without(a),this.updateSelectedAuthorsInput(),$("author-"+a)&&$("author-"+a).removeClassName(this.CONFIG.selected_author_class)},removeAllAuthors:function(){this.selected_authors=[],this.updateSelectedAuthorsInput(),this.selected_authors_list.select("LI").invoke("remove"),this.authors_to_select_list.select("."+this.CONFIG.selected_author_class).invoke("removeClassName",this.CONFIG.selected_author_class)},clearAuthorsToSelectList:function(){this.authors_to_select_list.select("LI").invoke("remove")},updateSelectedAuthorsInput:function(){this.selected_authors_input.value=this.selected_authors}});NarrowByAuthors.CONFIG={ajax_href:"/search/refinements",authors_to_select_list_id:"authors-to-select-list",selected_authors_list_id:"selected-authors-list",selected_authors_input_id:"selected_authors_input",select_heading_id:"authors-to-select-heading",most_citations_heading_id:"most-citations",sort_by_citations_id:"sort-by-citations",sort_by_last_name_id:"sort-by-last-name",narrow_controls_wrapper_id:"narrow-controls",clear_all_selected_id:"clear-all-selected",active_filter_class:"Active",selected_author_class:"Selected"};var NarrowByAffiliation=Class.create(PageWidget,{initialize:function(a,b,c){this.setOptions(c),this.node=$(a),this.affiliations_to_select_list=$(this.CONFIG.affiliations_to_select_list_id),this.selected_affiliations_list=$(this.CONFIG.selected_affiliations_list_id),this.node&&this.affiliations_to_select_list&&this.selected_affiliations_list&&(this.fetchAffiliations("citations"),this.sorting_by_name=!1,this.selected_affiliations=[],this.affiliations_data={},this.selected_affiliations_input=$(this.CONFIG.selected_affiliations_input_id),this.select_heading=$(this.CONFIG.select_heading_id),this.most_citations=$(this.CONFIG.most_citations_heading_id),this.sort_by_citations=$(this.CONFIG.sort_by_citations_id),this.sort_by_citations.observe("click",this.setSortAffiliationsByCitations.bindAsEventListener(this)),this.sort_by_last_name=$(this.CONFIG.sort_by_last_name_id),this.sort_by_last_name.observe("click",this.setSortAuthorsByLastName.bindAsEventListener(this)),$(this.CONFIG.clear_all_selected_id).observe("click",this.removeAllAffiliations.bindAsEventListener(this)),this.narrow_controls=$(this.CONFIG.narrow_controls_wrapper_id),this.narrow_controls.select("A").each(function(a){a.observe("click",this.filterClickHandler.bindAsEventListener(this,a))},this),this.boldAffiliationSortingByName(this.sorting_by_name),this.boldFilterList("most citations"))},fetchAffiliations:function(a){var b="citations"==a?"request=citations":"request="+a;new Ajax.Request(this.CONFIG.ajax_href+"&random="+(new Date).getTime(),{method:"get",parameters:b,evalJSON:"force",onSuccess:this.fetchAffiliationsSuccessHandler.bind(this),onFailure:this.fetchAffiliationsFailureHandler.bind(this)})},fetchAffiliationsSuccessHandler:function(a){var b=a.responseJSON.results;b?this.handleFetchedAffiliationData(b):this.fetchAffiliationsFailureHandler()},fetchAffiliationsFailureHandler:function(){this.node.up().setStyle({display:"none"})},handleFetchedAffiliationData:function(a){a.citations?(this.affiliations_by_citation=a.citations,this.displayBatchOfAffiliations(this.affiliations_by_citation)):($H(a).each(function(a){this.loadAuthorByLastName(a)},this),this.awaiting_letter&&(this.displayBatchOfAffiliations(this.affiliations_data[this.awaiting_letter][1]),this.awaiting_letter=null))},loadAuthorByLastName:function(a){if(!this.affiliations_data[a.key])for(this.affiliations_data[a.key]=[],x=0;x<a.length;x++)this.affiliations_data[a.key].push(a[x])},displayBatchOfAffiliations:function(a){this.clearAffiliationsToSelectList(),a.each(function(a){this.displayAffiliationToSelect(a)},this)},displayAffiliationToSelect:function(a){var b=new Element("LI",{id:"affiliation-"+a[0]});b.update("<span itemid="+a[3]+">"+a[1]+" ("+a[2]+")</span>"),this.selected_affiliations&&this.selected_affiliations.include(a[0])&&b.addClassName("Selected"),this.affiliations_to_select_list.insert({bottom:b}),b.observe("click",this.selectAffiliationClickHandler.bind(this,b,a[0]))},filterClickHandler:function(a,b){var c=b.innerHTML.toLowerCase();"most citations"==c?(this.filterAffiliationByCitations(),this.select_heading.update("Authors with the Most Citations")):(this.filterAffiliationsByLastName(c),this.select_heading.update("Authors by Last Name: "+b.innerHTML)),this.last_clicked=c,this.boldFilterList(c),this.activateSorting(this.sorting_by_name)},filterAffiliationByCitations:function(){this.affiliations_by_citation?this.displayBatchOfAffiliations(this.affiliations_by_citation):this.fetchAffiliations("citations")},filterAffiliationsByLastName:function(a){this.affiliations_data[a]?this.displayBatchOfAffiliations(this.affiliations_data[a][1]):(this.awaiting_letter=a,this.fetchAffiliations(a))},selectAffiliationClickHandler:function(a,b){this.selectAffiliation(b,a)},activateSorting:function(a){a?this.setSortAuthorsByLastName():this.setSortAffiliationsByCitations()},setSortAffiliationsByCitations:function(){this.sorting_by_name=!1,this.boldAffiliationSortingByName(this.sorting_by_name);var a=this.affiliations_to_select_list.select("LI").sortBy(function(a){return parseInt(a.innerHTML.gsub(/(.*)\((.*)\)(.*)/,"#{2}"))});a.reverse(),this.clearAffiliationsToSelectList(),this.displaySortedAuthors(a)},setSortAuthorsByLastName:function(){if(this.sorting_by_name=!0,this.boldAffiliationSortingByName(this.sorting_by_name),"most citations"==this.last_clicked)var a=this.affiliations_to_select_list.select("LI").sortBy(function(a){return a.innerHTML.stripTags().gsub(/(.*)\((.*)\)(.*)/,"#{1}").strip().split(" ").pop().slice(0,1)});else var a=this.affiliations_to_select_list.select("LI").sortBy(function(a){return a.innerHTML.stripTags().gsub(/(.*)\((.*)\)(.*)/,"#{1}").strip().split(" ").pop().slice(1,2)});this.clearAffiliationsToSelectList(),this.displaySortedAuthors(a)},boldAffiliationSortingByName:function(a){a?this.sort_by_last_name:this.sort_by_citations;a?(this.sort_by_citations.removeClassName(this.CONFIG.active_filter_class),this.sort_by_last_name.addClassName(this.CONFIG.active_filter_class)):(this.sort_by_last_name.removeClassName(this.CONFIG.active_filter_class),this.sort_by_citations.addClassName(this.CONFIG.active_filter_class))},boldFilterList:function(a){this.narrow_controls.select("A").invoke("removeClassName",this.CONFIG.active_filter_class),"most citations"==a?this.most_citations.addClassName(this.CONFIG.active_filter_class):$("filter-"+a).addClassName(this.CONFIG.active_filter_class)},selectAffiliation:function(a,b){this.selected_affiliations.include(a)||(this.selected_affiliations.push(a),this.copyAffiliationNodeToSelectedList(a,b),this.updateSelectedAffiliationsInput(),b.addClassName(this.CONFIG.selected_affiliation_class))},displaySortedAuthors:function(a){a.each(function(a){this.affiliations_to_select_list.insert({bottom:a})},this)},copyAffiliationNodeToSelectedList:function(a,b){var c=new Element("LI");c.update(b.innerHTML),this.selected_affiliations_list.insert({bottom:c}),c.observe("click",this.removeSelectedAffiliation.bind(this,a,c))},removeSelectedAffiliation:function(a,b){b.remove(),this.selected_affiliations=this.selected_affiliations.without(a),this.updateSelectedAffiliationsInput(),$("affiliation-"+a)&&$("affiliation-"+a).removeClassName(this.CONFIG.selected_affiliation_class)},removeAllAffiliations:function(){this.selected_affiliations=[],this.updateSelectedAffiliationsInput(),this.selected_affiliations_list.select("LI").invoke("remove"),this.affiliations_to_select_list.select("."+this.CONFIG.selected_affiliation_class).invoke("removeClassName",this.CONFIG.selected_affiliation_class)},clearAffiliationsToSelectList:function(){this.affiliations_to_select_list.select("LI").invoke("remove")},updateSelectedAffiliationsInput:function(){this.selected_affiliations_input.value=this.selected_affiliations}});NarrowByAffiliation.CONFIG={ajax_href:"/search/NarrowBySearch.jsp?action=narrowByAffiliations",affiliations_to_select_list_id:"affiliations-to-select-list",selected_affiliations_list_id:"selected-affiliations-list",selected_affiliations_input_id:"selected_affiliations_input",select_heading_id:"affiliations-to-select-heading",most_citations_heading_id:"most-citations",sort_by_citations_id:"sort-by-citations",sort_by_last_name_id:"sort-by-last-name",narrow_controls_wrapper_id:"narrow-controls",clear_all_selected_id:"clear-all-selected",active_filter_class:"Active",selected_affiliation_class:"Selected"};var NarrowByDate=Class.create(PageWidget,{initialize:function(a){this.setOptions(a),this.start_date_input=$(this.CONFIG.start_date_input).disable(),this.end_date_input=$(this.CONFIG.end_date_input).disable(),this.slider=$(this.CONFIG.slider),this.slide_scroller=$(this.CONFIG.slide_scroller),this.active_slide_range=$(this.CONFIG.slider_active_range),this.slider_width=this.CONFIG.slider_width,this.start_date_slider=$(this.CONFIG.start_date_slider),this.end_date_slider=$(this.CONFIG.end_date_slider),this.fetchYearRange()},fetchYearRange:function(){new Ajax.Request(this.CONFIG.ajax_href+"&random="+(new Date).getTime(),{method:"get",evalJSON:"force",onSuccess:this.fetchSuccessHandler.bind(this),onFailure:this.fetchFailureHandler.bind(this)})},fetchFailureHandler:function(){$(this.CONFIG.wrapper_id).setStyle({display:"none"})},fetchSuccessHandler:function(a){this.start_year=a.responseJSON.start,this.end_year=a.responseJSON.end,this.renderLabels(),this.calculateYears(),this.createSlider(),this.drawActiveRange(),this.original_start_position=this.start_date_slider.style.left,this.original_end_position=this.end_date_slider.style.left},renderLabels:function(){var a=$(this.CONFIG.start_date_label),b=$(this.CONFIG.end_date_label);a&&(a.innerHTML=this.start_year,this.start_date_input.value=this.start_year),b&&(b.innerHTML=this.end_year,this.end_date_input.value=this.end_year)},calculateYears:function(){var a=new Date,b=a.getFullYear(),c=b-this.CONFIG.first_year;this.inner_date_range=this.end_year-this.start_year,this.inner_width=parseInt(this.CONFIG.slider_width*(this.inner_date_range/c)),from_left=Math.round(this.CONFIG.slider_width/c)*(this.start_year-this.CONFIG.first_year),this.slide_scroller.setStyle({width:this.inner_width+"px",marginLeft:from_left+"px"}),this.increment=this.inner_date_range/this.slide_scroller.getWidth()},createSlider:function(){this.slider_control=new Control.Slider([this.start_date_slider,this.end_date_slider],this.slider,{increment:this.increment,range:$R(this.start_year,this.end_year),minimum:this.start_year,maximum:this.end_year,restricted:!0,sliderValue:[this.start_year,this.end_year],onSlide:function(a){this.updateSliderValue(a)}.bind(this),onChange:function(a){this.updateSliderValue(a)}.bind(this)})},updateSliderValue:function(a){this.start_date_input.value=parseInt(a[0]),this.end_date_input.value=parseInt(a[1]),this.drawActiveRange()},drawActiveRange:function(){this.active_slide_range.setStyle({left:this.start_date_slider.style.left,width:parseInt(this.end_date_slider.style.left)-12-parseInt(this.start_date_slider.style.left)+this.end_date_slider.getWidth()-10+"px"})}});NarrowByDate.CONFIG={wrapper_id:"narrow-by-date",ajax_href:"/search/search?action=narrowByDate",first_year:1913,slider:"slider",slide_scroller:"slider-scroll",slider_active_range:"active-range",slider_width:500,start_date_slider:"start-date-slider",end_date_slider:"end-date-slider",start_date_input:"start-date",end_date_input:"end-date",start_date_label:"start-label",end_date_label:"end-label"};var NarrowByPubTitle=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.data_list=$(this.CONFIG.data_list_id),this.data_list&&(this.fetchPubTitles("citations"),this.pubtitles_to_select_list=$(this.CONFIG.pubtitles_to_select_list_id),this.selected_pubtitles_list=$(this.CONFIG.selected_pubtitles_id),this.column_wrapper=$(this.CONFIG.column_wrapper_id),this.column_width=this.CONFIG.column_width,this.selected_pubtitles=[],this.expanded_pubtitles={},this.initializePubTitleList(this.data_list),$(this.CONFIG.clear_selected_id).observe("click",this.removeAllPubTitless.bindAsEventListener(this)))},initializePubTitleList:function(a){a.select(this.CONFIG.category_selector).each(function(a){a.observe("click",this.selectExpandablePubTitleClickHandler.bindAsEventListener(this,a))},this),a.select(this.CONFIG.pubtitle_selector).each(function(a){a.observe("click",this.selectPubTitleClickHandler.bindAsEventListener(this,a))},this)},fetchPubTitles:function(){new Ajax.Request(this.CONFIG.ajax_href+"&random="+(new Date).getTime(),{method:"get",evalJSON:"force",onSuccess:this.fetchPubTitlesSuccessHandler.bind(this),onFailure:this.fetchPubTitlesFailureHandler.bind(this)})},fetchPubTitlesSuccessHandler:function(a){var b=a.responseJSON;b&&this.handleFetchedPubTitleData(b)},fetchPubTitlesFailureHandler:function(){alert("failure")},handleFetchedPubTitleData:function(a){this.pubtitles=a.pubtitles,this.displayBatchOfPubTitles(this.pubtitles)},displayBatchOfPubTitles:function(a){this.clearPubTitlesToSelectList(),a.each(function(a){this.displayPubTitleToSelect(a)},this)},displayPubTitleToSelect:function(a){var b=new Element("LI",{id:"title-"+a[0]});b.update("<span itemid="+a[3]+">"+a[1]+" ("+a[2]+")</span>"),this.selected_pubtitles&&this.selected_pubtitles.include(a[0])&&b.addClassName("Selected"),this.pubtitles_to_select_list.insert({bottom:b}),b.observe("click",this.selectPubTitleClickHandler.bindAsEventListener(this,b))},clearPubTitlesToSelectList:function(){this.pubtitles_to_select_list.select("LI").invoke("remove")},selectPubTitleClickHandler:function(a,b){this.addPubTitle(a,b)},selectExpandablePubTitleClickHandler:function(a,b){this.selectExpandablePubTitle(a,b)},selectExpandablePubTitle:function(a,b){var c=b.cumulativeOffset();a.clientX+this.data_list.scrollLeft<c[0]+16?this.addPubTitleContainer(b):this.expandPubTitle(b)},addPubTitle:function(a,b){pubtitle_id=b.id.split("-")[1],this.selected_pubtitles.include(pubtitle_id)||(this.selected_pubtitles.push(pubtitle_id),this.copyPubTitleNodeToSelectedList(b),b.addClassName("Selected"))},addPubTitleContainer:function(a){if(!this.selected_pubtitle.include(a.id.split("-")[1])){this.addPubTitle(this,a);var b=a.hasClassName("Active")?a.up(".Column").next(".Column"):a;b.select("LI").each(function(a){this.selected_pubtitles.include(a.id.split("-")[1])||(a.hasClassName("Expandable")?this.addPubTitleContainer(a):this.addPubTitle(this,a))},this),this.expandPubTitle(a)}},expandPubTitle:function(a){if(!a.hasClassName("Active")){this.scollToCorrectColumn(a);var b=a.down(".Collapsed");this.toggleColumnWrapperWidth(!0),this.column_wrapper.insert({bottom:b}),this.expanded_pubtitles[b.id]=a.id,a.addClassName("Active"),b.removeClassName("Collapsed").addClassName("Expanded").down("UL").select("LI").each(function(a){this.selected_pubtitles.include(a.id.split("-")[1])&&a.addClassName("Selected")},this)}},scollToCorrectColumn:function(a){var b=a.ancestors(),c=a.up(".Column").nextSiblings();c.each(function(a){a.hasClassName("Expanded")&&!b.include(a)&&this.removeColumn(a)},this)},toggleColumnWrapperWidth:function(a){this.column_width=a?this.column_width+200:this.column_width-200,this.column_wrapper.setStyle({width:this.column_width+"px"}),this.data_list.scrollDiv(this.column_width,0)},removeColumn:function(a){$(this.expanded_titles[a.id]).insert({bottom:a}).removeClassName("Active"),a.removeClassName("Expanded").addClassName("Collapsed"),this.toggleColumnWrapperWidth(!1)},copyPubTitleNodeToSelectedList:function(a){var b=new Element("LI");b.update(a.innerHTML),this.selected_pubtitles_list.insert({bottom:b}),b.observe("click",this.removeSelectedPubTitle.bind(this,b))},removeSelectedPubTitle:function(a){a.remove(),this.selected_pubtitles=this.selected_pubtitles.without(a.id);var b=$("pubtitle-"+a.id);b&&b.removeClassName("Selected")},removeAllPubTitles:function(){this.selected_pubtitles=[],this.selected_pubtitles_list.select("LI").invoke("remove"),this.data_list.select(".Selected").invoke("removeClassName","Selected")}});NarrowByPubTitle.CONFIG={ajax_href:"/search/NarrowBySearch.jsp?action=narrowByPubTitle",column_width:200,category_selector:".Expandable",pubtitle_selector:".PubTitle",data_list_id:"pubtitles-data-list",clear_selected_id:"clear-all-selected",column_wrapper_id:"column-wrapper",selected_pubtitles_id:"selected-pubtitles-list",pubtitles_to_select_list_id:"pubtitles-to-select-list"};var NarrowBySubject=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.data_list=$(this.CONFIG.data_list_id),this.data_list&&(this.fetchSubjects("citations"),this.subjects_to_select_list=$(this.CONFIG.subjects_to_select_list_id),this.selected_subjects_list=$(this.CONFIG.selected_subjects_id),this.column_wrapper=$(this.CONFIG.column_wrapper_id),this.column_width=this.CONFIG.column_width,this.selected_subjects=[],this.expanded_subjects={},this.initializeSubjectList(this.data_list),$(this.CONFIG.clear_selected_id).observe("click",this.removeAllSubjects.bindAsEventListener(this)))},initializeSubjectList:function(a){a.select(this.CONFIG.category_selector).each(function(a){a.observe("click",this.selectExpandableSubjectClickHandler.bindAsEventListener(this,a))},this),a.select(this.CONFIG.subject_selector).each(function(a){a.observe("click",this.selectSubjectClickHandler.bindAsEventListener(this,a))},this)},fetchSubjects:function(){new Ajax.Request(this.CONFIG.ajax_href+"&random="+(new Date).getTime(),{method:"get",evalJSON:"force",onSuccess:this.fetchSubjectsSuccessHandler.bind(this),onFailure:this.fetchSubjectsFailureHandler.bind(this)})},fetchSubjectsSuccessHandler:function(a){var b=a.responseJSON.taxonomy;b&&this.handleFetchedSubjectData(b)},fetchSubjectsFailureHandler:function(){alert("failure")},handleFetchedSubjectData:function(a){this.subject_taxonomy=a,this.displayBatchOfSubjects(this.subject_taxonomy)},displayBatchOfSubjects:function(a){this.clearSubjectsToSelectList(),a.each(function(a){this.displaySubjectToSelect(a)},this)},displaySubjectToSelect:function(a){var b=new Element("LI",{id:"subject-"+a[0]});b.update("<span itemid="+a[4]+">"+a[1]+" "+a[2]+" ("+a[3]+")</span>"),this.selected_subjects&&this.selected_subjects.include(a[0])&&b.addClassName("Selected"),this.subjects_to_select_list.insert({bottom:b}),b.observe("click",this.selectSubjectClickHandler.bindAsEventListener(this,b))},clearSubjectsToSelectList:function(){this.subjects_to_select_list.select("LI").invoke("remove")},selectSubjectClickHandler:function(a,b){this.addSubject(a,b)},selectExpandableSubjectClickHandler:function(a,b){this.selectExpandableSubject(a,b)},selectExpandableSubject:function(a,b){var c=b.cumulativeOffset();a.clientX+this.data_list.scrollLeft<c[0]+16?this.addSubjectContainer(b):this.expandSubject(b)},addSubject:function(a,b){subject_id=b.id.split("-")[1],this.selected_subjects.include(subject_id)||(this.selected_subjects.push(subject_id),this.copySubjectNodeToSelectedList(b),b.addClassName("Selected"))},addSubjectContainer:function(a){if(!this.selected_subjects.include(a.id.split("-")[1])){this.addSubject(this,a);var b=a.hasClassName("Active")?a.up(".Column").next(".Column"):a;b.select("LI").each(function(a){this.selected_subjects.include(a.id.split("-")[1])||(a.hasClassName("Expandable")?this.addSubjectContainer(a):this.addSubject(this,a))},this),this.expandSubject(a)}},expandSubject:function(a){if(!a.hasClassName("Active")){this.scollToCorrectColumn(a);var b=a.down(".Collapsed");this.toggleColumnWrapperWidth(!0),this.column_wrapper.insert({bottom:b}),this.expanded_subjects[b.id]=a.id,a.addClassName("Active"),b.removeClassName("Collapsed").addClassName("Expanded").down("UL").select("LI").each(function(a){this.selected_subjects.include(a.id.split("-")[1])&&a.addClassName("Selected")},this)}},scollToCorrectColumn:function(a){var b=a.ancestors(),c=a.up(".Column").nextSiblings();c.each(function(a){a.hasClassName("Expanded")&&!b.include(a)&&this.removeColumn(a)},this)},toggleColumnWrapperWidth:function(a){this.column_width=a?this.column_width+200:this.column_width-200,this.column_wrapper.setStyle({width:this.column_width+"px"}),this.data_list.scrollDiv(this.column_width,0)},removeColumn:function(a){$(this.expanded_subjects[a.id]).insert({bottom:a}).removeClassName("Active"),a.removeClassName("Expanded").addClassName("Collapsed"),this.toggleColumnWrapperWidth(!1)},copySubjectNodeToSelectedList:function(a){var b=new Element("LI");b.update(a.innerHTML),this.selected_subjects_list.insert({bottom:b}),b.observe("click",this.removeSelectedSubject.bind(this,b))},removeSelectedSubject:function(a){a.remove(),this.selected_subjects=this.selected_subjects.without(a.id);var b=$("subject-"+a.id);b&&b.removeClassName("Selected")},removeAllSubjects:function(){this.selected_subjects=[],this.selected_subjects_list.select("LI").invoke("remove"),this.data_list.select(".Selected").invoke("removeClassName","Selected")}});NarrowBySubject.CONFIG={ajax_href:"/search/NarrowBySearch.jsp?action=narrowBySubject",column_width:200,category_selector:".Expandable",subject_selector:".Subject",data_list_id:"subjects-data-list",clear_selected_id:"clear-all-selected",column_wrapper_id:"column-wrapper",selected_subjects_id:"selected-subjects-list",subjects_to_select_list_id:"subjects-to-select-list"};var Popup=Behavior.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.popup_location=a,this.layout_wrapper=$(this.CONFIG.layout_wrapper),this.layout_wrapper&&(this.defineBrowserVariables(),this.definePopupType(),this.createOverlay(),this.element.observe("click",this.popUpClickHandler.bindAsEventListener(this)),this.overlay_observer=this.overlayClickHandler.bindAsEventListener(this),this.initializeCallback=this.CONFIG.initialize_callback.bind(this),this.validateCallback=this.CONFIG.validate_callback.bind(this),this.showCallback=this.CONFIG.show_callback.bind(this),this.hideCallback=this.CONFIG.hide_callback.bind(this),this.initializeCallback())},defineBrowserVariables:function(){this.document_height=this.layout_wrapper.getHeight(),this.vertical_scroll=document.viewport.getScrollOffsets()[1],this.window_height=document.viewport.getHeight(),this.window_width=document.viewport.getWidth(),this.element_position=this.element.positionedOffset()},definePopupType:function(){"#"!=this.element.getAttribute("href")&&"a"==this.element.tagName.toLowerCase()&&this.element.setStyle({cursor:"pointer"}).removeAttribute("href"),!this.CONFIG.use_ajax&&this.element.hasClassName(this.CONFIG.dhtml_popup_class)&&this.element.addClassName(this.CONFIG.dhtml_trigger_class).removeClassName(this.CONFIG.dhtml_popup_class)},createOverlay:function(){if(!$("popup_overlay")){var a=new Element("DIV",{id:"popup_overlay",style:"width: "+this.window_width+"px;"});$(document.body).insert({bottom:a})}this.overlay=$("popup_overlay")},popUpClickHandler:function(){this.defineBrowserVariables(),this.popup_container?this.displayPopup():this.fetchPopup()},overlayClickHandler:function(a){a.target==this.overlay&&this.hidePopup()},fetchPopup:function(){this.CONFIG.use_ajax?new Ajax.Request(this.popup_location,{method:"get",onSuccess:this.popUpAjaxSuccessHandler.bind(this),onFailure:this.popUpAjaxFailureHandler.bind(this)}):$(this.popup_location)&&(this.createPopup($(this.popup_location).innerHTML),this.displayPopup())},popUpAjaxSuccessHandler:function(a){this.createPopup(a.responseText),this.displayPopup()},popUpAjaxFailureHandler:function(){alert("The AJAX request failed and the popup cannot load.")},createPopup:function(a){$(this.element.id+"_container")||(this.popup_container=new Element("DIV",{id:this.element.id+"_container","class":"popup_container",style:"position: absolute; width: "+this.popup_width+"px; display: none; z-index: 1000;"}),this.overlay.insert({bottom:this.popup_container}),Element.extend(this.popup_container),this.CONFIG.use_ajax?this.popup_container.update(a):this.popup_container.insert($(this.popup_location)),this.calculatePopupDimensions())},calculatePopupDimensions:function(){this.displayOverlay(),this.popup_container.addClassName("Calculating"),this.popup_width=this.popup_container.getWidth(),this.popup_height=this.popup_container.getHeight(),this.popup_container.removeClassName("Calculating"),this.hideOverlay()
},displayPopup:function(){Prototype.Browser.IE&&this.hideAllContainers(),this.validated=!0,this.validateCallback(),this.validated&&(this.positionPopup(),this.displayOverlay(),this.insertIframe(),this.popup_container.setStyle({display:"block"}),this.overlay.observe("click",this.overlay_observer),this.initializePopupElements(),this.showCallback())},initializePopupElements:function(){if(this.CONFIG.window_submit_selector&&(this.popup_form=this.popup_container.down("FORM"),this.popup_form)){this.popup_form.findFirstElement()&&this.popup_form.focusFirstElement(),this.popup_form_location=this.popup_form.action,this.popup_form_method=this.popup_form.method;var a=this.popup_container.select(this.CONFIG.window_submit_selector);a.size()>0&&a.each(function(a){a.observe("click",this.submitPopupForm.bind(this))},this)}if(this.CONFIG.window_close_selector){var b=this.popup_container.select(this.CONFIG.window_close_selector);b.size()>0&&b.each(function(a){a.observe("click",this.hidePopup.bind(this))},this)}},submitPopupForm:function(a){a.stop(),this.validation||(this.validation=new Validation(this.popup_form)),this.validation.validate()&&(this.popup_form&&new Ajax.Request(this.popup_form_location,{parameters:this.popup_form.serialize(),onSuccess:this.CONFIG.form_onsuccess_callback,onFailure:this.CONFIG.form_onfailure_callback}),this.validation=null,this.hidePopup())},displayOverlay:function(){this.overlay.setStyle({height:this.document_height+"px",display:"block",visibility:"visible"})},hideOverlay:function(){this.popup_container.visible()&&this.hidePopup(),this.overlay.setStyle({display:"none",visibility:"hidden"})},insertIframe:function(){Prototype.Browser.IE6&&this.createIframe(this.popup_container,{top:this.popup_container.style.top,left:this.popup_container.style.left,height:this.popup_height+"px",width:this.popup_width+"px"})},removeIframe:function(){if(Prototype.Browser.IE6){var a=$("popup-iframe");a&&a.remove()}},createIframe:function(a,b){new Insertion.Bottom(a.up(),new Template('<iframe id="popup-iframe" frameborder="0" scrolling="no" style="width: #{width}; height: #{height}; left: #{left}; top: #{top}; position: absolute; z-index: 502;"></iframe>').evaluate(b))},positionPopup:function(){switch(this.CONFIG.position){case"auto":this.popup_container.setStyle({top:this.window_height/2-this.popup_height/2+this.vertical_scroll+"px",left:(this.window_width-this.popup_width)/2+"px"});break;case"vertical":this.popup_container.setStyle({top:this.element_position[1]+this.element.getHeight()+"px",left:this.element_position[0]+"px"});break;case"horizontal":this.popup_container.setStyle({top:this.window_height/2-this.popup_height/2+this.vertical_scroll+"px",left:this.element_position[0]+this.element.getWidth()+1+"px"})}},hidePopup:function(){this.removeIframe(),this.hideAllContainers(),this.overlay.setStyle({display:"none"}).stopObserving("click",this.overlay_observer),this.hideCallback()},hideAllContainers:function(){this.removeIframe(),this.overlay.select(".popup_container").each(function(a){a.style.display="none"},this)},attachCheckboxObserver:function(a,b,c){var d=this.layout_wrapper.down(a);if(d){var e=d.select('INPUT[type="checkbox"]');e.each(function(a){a.observe("click",this.toggleCheckboxDisabledPopup.bindAsEventListener(this,e,b,c))},this)}this.select_all=$("select-all"),this.deselect_all=$("deselect-all"),this.select_all_bottom=$("select-all-bottom"),this.deselect_all_bottom=$("deselect-all-bottom"),this.select_all&&this.deselect_all&&(this.select_all.observe("click",this.toggleDisabledPopup.bindAsEventListener(this,!0,b,c)),this.deselect_all.observe("click",this.toggleDisabledPopup.bindAsEventListener(this,!1,b,c))),this.select_all_bottom&&this.deselect_all_bottom&&(this.select_all_bottom.observe("click",this.toggleDisabledPopup.bindAsEventListener(this,!0,b,c)),this.deselect_all_bottom.observe("click",this.toggleDisabledPopup.bindAsEventListener(this,!1,b,c))),e&&this.toggleCheckboxDisabledPopup(this,e,b,c)},toggleCheckboxDisabledPopup:function(a,b,c,d){var e=!1;b.each(function(a){a.checked&&(e=!0)}),e?this.toggleDisabledPopup(a,!0,c,d):this.toggleDisabledPopup(a,!1,c,d)},toggleDisabledPopup:function(a,b,c,d){var e=$(c);if(e)if(b){e.removeClassName("disabled"),this.element.src=d[0];var f=e.readAttribute("alt"),g=f.replace(/ Disabled/g,"");e.writeAttribute("alt",g)}else{e.addClassName("disabled"),this.element.src=d[1];var f=e.readAttribute("alt"),g=f.replace(/ Disabled/g,"");g+=" Disabled",e.writeAttribute("alt",g)}},displayUnlessDisabled:function(){this.element.hasClassName("disabled")&&(this.validated=!1)}});Popup.CONFIG={use_ajax:!0,position:"auto",window_submit_selector:".form-action",window_close_selector:".close-popup",layout_wrapper:"LayoutWrapper",dhtml_popup_class:"DHTMLPopup",dhtml_trigger_class:"DHTMLTrigger",initialize_callback:Prototype.emptyFunction,validate_callback:Prototype.emptyFunction,show_callback:Prototype.emptyFunction,hide_callback:Prototype.emptyFunction,form_onsuccess_callback:Prototype.emptyFunction,form_onfailure_callback:Prototype.emptyFunction},Event.addBehavior({"#popup-search-preferences.":Popup("/xpl/mwPreferences.jsp",{show_callback:function(){new UserPreferences},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("SearchBarWrapper")?$("SearchBarWrapper").insert({top:c}):$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3})},validate_callback:function(){this.displayUnlessDisabled()},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-search-preferences-mysettings.":Popup("/xpl/mwPreferences.jsp",{show_callback:function(){new UserPreferences},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3})},validate_callback:function(){this.displayUnlessDisabled()},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-choose-sources":Popup("choose-sources",{position:"vertical",use_ajax:!1}),"#popup-save-selections-to-project":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/save_to_project.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-save-selections-to-project",[ASSETS_RELATIVE_PATH+"/img/btn.save-to-project.gif",ASSETS_RELATIVE_PATH+"/img/btn.save-to-project.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),".popup-save-to-project":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/save_to_project.html",{show_callback:function(){this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),"#popup-save-document-to-project":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/save_to_project.html",{position:"vertical"}),"#popup-email-selected":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_results.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-email-selected",[ASSETS_RELATIVE_PATH+"/img/btn.email.gif",ASSETS_RELATIVE_PATH+"/img/btn.email.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){var a=$("tocresultform").select("input[type='checkbox']"),b=a.collect(function(a){return a.checked?a.id:""});$("abs_link").value="/xpl/abs_all.jsp?",$("hidden_input").value=b.join(";"),$("from_page").value="tocresult"},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3}),window.location.reload(!1)},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-email-selected-results":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_results.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-email-selected-results",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){var a=$("search_results_form").select("input[type='checkbox']"),b=a.collect(function(a){return a.checked?a.id:void 0});$("hidden_input").value=b.join(";");var c=this.element.up("LI").up("UL").down(".fromPage").innerHTML;$("from_page").value=c,$("abs_link").value="/xpl/articleDetails.jsp?navigation=no"},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3})},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-email-selected-results-myprojects":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_results.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-email-selected-results-myprojects",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){var a=$("myprojects_results_form").select("input[type='checkbox']"),b=a.collect(function(a){return a.checked?a.id:void 0});$("hidden_input").value=b.join(";");var c=this.element.up("LI").up("UL").down(".fromPage").innerHTML;$("from_page").value=c,$("abs_link").value="/xpl/articleDetails.jsp?navigation=no"},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3})},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-export-results":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/export_results.html",{position:"vertical",validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){$("export-results").hasClassName("Activated")||(new ExportSearchResults("export-results"),$("export-results").addClassName("Activated"))},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-export-project-listing":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/export_project_listing.html",{position:"vertical",validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){new ExportProjectListing("export-project-listing")},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-email-selected-notes":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_notes.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-email-selected-notes",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-notes.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-notes.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-email-selected-notes-2":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_notes.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.listview","popup-email-selected-notes-2",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-notes.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-notes.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-email-selected-most-popular":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_results.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.listview","popup-email-selected-most-popular",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-results.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-email-document":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_document.html",{position:"vertical",show_callback:function(){var a=$("popup-email-document").up("div").down("#fromPage").innerHTML,b=$("popup-email-document").up("div").down("#recordId").innerHTML;b=j$.trim(b),"searchabstract"==a?($("abs_link").value="/xpl/articleDetails.jsp?navigation=no&",$("from_page").value="searchresult"):$("abs_link").value="moduleabstract"==a?"/xpl/modulesabstract.jsp?":"/xpl/abs_all.jsp?",$("hidden_input").value=b},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"});else var c=new Element("p",{"class":"validation-failed validation-advice",style:"padding: .5em;margin-top:1em;"});c.update(b.message),$("Body").down("div").next("div").insert({top:c}),new Effect.Fade(c,{delay:3})},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-email-selected-files":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/email_selected_files.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.listview","popup-email-selected-files",[ASSETS_RELATIVE_PATH+"/img/btn.email-selected-files.gif",ASSETS_RELATIVE_PATH+"/img/btn.email-selected-files.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-download-myproject-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-download-myproject-citations",[ASSETS_RELATIVE_PATH+"/img/btn-download-selected-citations.png",ASSETS_RELATIVE_PATH+"/img/btn-download-selected-citations-disabled.png"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){$("download-citations").hasClassName("Activated")||(new DownloadSearchResultCitations("download-citations"),$("download-citations").addClassName("Activated"))},form_onsuccess_callback:function(){},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-download-browse-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-download-browse-citations",[ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.gif",ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){$("download-citations").hasClassName("Activated")||(new DownloadBrowseCitations("download-citations"),$("download-citations").addClassName("Activated"))},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-download-searchresult-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-download-searchresult-citations",[ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.gif",ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()},show_callback:function(){$("download-citations").hasClassName("Activated")||(new DownloadSearchResultCitations("download-citations"),$("download-citations").addClassName("Activated"))},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"#popup-download-citations-icp":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){},show_callback:function(){$("download-citations").hasClassName("Activated")||(new DownloadBrowseCitations("download-citations"),$("download-citations").addClassName("Activated")),$("recordIds").value=$("popup-download-citations-icp").up("#LayoutWrapper").down("#recordId").innerHTML},hide_callback:function(){this.popup_container.remove(),this.popup_container=null},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-download-popular-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.listview","popup-download-popular-citations",[ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.gif",ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-download-project-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.listview","popup-download-project-citations",[ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.gif",ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-download-document-citations":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/download_citations.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-download-search-citations",[ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.gif",ASSETS_RELATIVE_PATH+"/img/btn.dl-citations.disabled.gif"])},show_callback:function(){var a=($("popup-email-document").up("div").down("#fromPage").innerHTML,$("popup-email-document").up("div").down("#recordId").innerHTML);$("download-citations").hasClassName("Activated")||(new DownloadBrowseCitations("download-citations"),$("download-citations").addClassName("Activated")),a=j$.trim(a),$("recordIds").value=a},hide_callback:function(){this.popup_container.remove(),this.popup_container=null},validate_callback:function(){this.displayUnlessDisabled()}}),"#popup-narrow-by-author":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/narrow_by_authors.html?random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){var a=document.getElementById("oqs").value;$("narrow-by-authors").hasClassName("Activated")||(new NarrowByAuthors("narrow-by-authors","asdf",a),$("narrow-by-authors").addClassName("Activated")),this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),"#popup-narrow-by-pubtitle":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/narrow_by_pubtitle.html?random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){$("narrow-by-pubtitle").hasClassName("Activated")||(new NarrowByPubTitle("narrow-by-pubtitle"),$("narrow-by-pubtitle").addClassName("Activated")),this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),"#popup-narrow-by-subject":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/narrow_by_subject.html?random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){$("narrow-by-subject").hasClassName("Activated")||(new NarrowBySubject("narrow-by-subject"),$("narrow-by-subject").addClassName("Activated")),this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),"#popup-narrow-by-affiliation":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/narrow_by_affiliation.html?random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){$("narrow-by-affiliations").hasClassName("Activated")||(new NarrowByAffiliation("narrow-by-affiliations","asdf"),$("narrow-by-affiliations").addClassName("Activated")),this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),".popup-related-content":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/related_content.html"),"#popup-narrow-by-date":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/narrow_by_date.html?random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){$("narrow-by-date").hasClassName("Activated")||(new NarrowByDate("narrow-by-date","asdf"),$("narrow-by-date").addClassName("Activated")),this.element.up("LI").addClassName("HoverStatic")},hide_callback:function(){this.element.up("LI").removeClassName("HoverStatic")}}),"#popup-add-tags-or-notes":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/add_tags_or_notes.html",{position:"vertical"}),"#popup-add-batch-tags-or-notes":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/add_tags_or_notes.html",{position:"vertical",initialize_callback:function(){this.attachCheckboxObserver("UL.Results","popup-add-batch-tags-or-notes",[ASSETS_RELATIVE_PATH+"/img/btn.add-tags-or-notes.gif",ASSETS_RELATIVE_PATH+"/img/btn.add-tags-or-notes.disabled.gif"])},validate_callback:function(){this.displayUnlessDisabled()}}),"#save-this-search-button":Popup("/jsp/personalization/save_this_search.jsp?&random="+(new Date).getTime(),{position:"horizontal",show_callback:function(){$("save-this-search").hasClassName("Activated")||(new SaveSearch({}),$("save-this-search").addClassName("Activated"))},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();Xplore.component.globalNotification.show(b.validates?b.message:b.message)},hide_callback:function(){this.popup_container.remove(),this.popup_container=null}}),"LI.EditSavedSearch":Popup("/jsp/personalization/save_this_search.jsp?random="+(new Date).getTime(),{initialize_callback:function(){var a=this.element.id.replace("edit-saved-search-","");this.popup_location=this.popup_location+"?"+a,this.ss_email_address=$("up-email-address")?$("up-email-address").innerHTML:"Not set",this.popup_data_tr=$("saved-search-"+a),this.ss_display_query=this.popup_data_tr.down(".ss_display_query").innerHTML.stripTags(),this.ss_title=this.popup_data_tr.down(".ss_title").innerHTML,this.ss_query_str=this.popup_data_tr.down(".ss_query_str").innerHTML,this.search_id=this.popup_data_tr.down(".search_id").innerHTML,this.div_display_query=this.popup_data_tr.down(".div_display_query").innerHTML,this.ss_alert=this.popup_data_tr.down(".ss_alert").innerHTML},form_onsuccess_callback:function(a){var b=a.responseText.evalJSON();if(b.validates)var c=new Element("p",{"class":"validation-advice"}).update(b.message);else var c=new Element("p",{"class":"validation-eror"}).update(b.message);if(b.ID){this.popup_data_tr=$("saved-search-"+b.ID),b.queryTitle&&(this.popup_data_tr.down("td").down(".ss_title").innerHTML=b.queryTitle);var d=this.popup_data_tr.down(0).next("td",2).down("ul").down("li").next("li",2);"on"==b.alert?(this.popup_data_tr.down("td").down(".ss_alert").innerHTML="Y",d.replace('<a href="/search/noAlert?searchID='+b.ID+'"> Remove Alert </a>')):(this.popup_data_tr.down("td").down(".ss_alert").innerHTML="N",d.replace('<a href="/search/setAlert?searchID='+b.ID+'"> Set Alert </a>'))}$("Body").down("div").insert({top:c}),new Effect.Fade(c,{delay:3}),window.location.reload(!1)},show_callback:function(){this.popup_container.down(".ss_display_query").value=this.ss_display_query.strip(),this.popup_container.down(".div_display_query").innerHTML=this.div_display_query,this.popup_container.down(".ss_title").value=this.popup_data_tr.down(".ss_title").innerHTML,this.popup_container.down(".ss_qry_str").value=this.ss_query_str,this.popup_container.down(".search_id").value=this.search_id,this.popup_container.down(".div_email_address").innerHTML=this.ss_email_address,this.ss_alert=this.popup_data_tr.down(".ss_alert").innerHTML,this.popup_container.down("#ss_alerts_boolean").checked="Y"==this.ss_alert?"checked":""},hide_callback:function(){this.popup_container&&(this.popup_container.remove(),this.popup_container=null)}}),"#set-alert-on-this-search":Popup(ASSETS_RELATIVE_PATH_NO_SERVER+"/html/saved_search.html"),"#search-tips-popup":Popup("/xpl/cmsSearchTips.jsp",{show_callback:function(){j$("#search-tips-popup_container span.close-popup").attr("tabindex","1").focus().keydown(function(){})}})});var SaveSearch=Class.create(PageWidget,{initialize:function(a){if(this.setOptions(a),this.results_header=$("results-hdr"),this.div_display_query="",this.results_header){var b=this.results_header.select(".refinement");b=b.collect(function(a){return a.innerHTML.stripTags()}),b.each(function(a){this.div_display_query=this.div_display_query.concat('<p align="left">'+a+"<br /> </p>")},this)}this.ss_display_query=$("hiddenBreadcrumbContent").innerHTML.stripTags().strip(),this.ss_title=$("savedSearchTitle").value,this.ss_qry_str=$("oqs").value,this.ss_endeca_query=$("hiddenEndecaQuery").innerHTML.stripTags().strip(),this.renderLabels()},renderLabels:function(){var a=$(this.CONFIG.ss_title),b=$(this.CONFIG.ss_display_query),c=$(this.CONFIG.ss_qry_str),d=$(this.CONFIG.div_display_query),e=$(this.CONFIG.ss_endeca_query);a&&(a.value=this.ss_title),b&&(b.value=this.ss_display_query),d&&(d.innerHTML=this.div_display_query),c&&(c.value=this.ss_qry_str),e&&(e.value=this.ss_endeca_query)}});SaveSearch.CONFIG={wrapper_id:"save-this-search",ajax_href:"/jsp/personalization/save_this_search.jsp?random="+(new Date).getTime(),ss_title:"ss_title",ss_display_query:"ss_display_query",ss_qry_str:"ss_qry_str",div_display_query:"div_display_query",ss_endeca_query:"ss_endeca_query",ss_email_address:"ss_email_address"};var DownloadBrowseCitations=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.node=$(a),this.fetchUserPref()},fetchUserPref:function(){new Ajax.Request(this.CONFIG.ajax_href,{method:"get",evalJSON:"force",onSuccess:this.fetchSuccessHandler.bind(this),onFailure:this.fetchFailureHandler.bind(this)})},fetchFailureHandler:function(){$(this.CONFIG.wrapper_id).setStyle({display:"none"})},fetchSuccessHandler:function(a){var b=a.responseText.evalJSON();this.DL_Format=b.DL_Format,this.CIT_Format=b.CIT_Format,this.renderLabels()},renderLabels:function(){"1"==this.CIT_Format?this.node.down("#citation-only").checked="checked":"2"==this.CIT_Format?this.node.down("#citation-abstract").checked="checked":this.node.down("#citation-only").checked="checked","1"==this.DL_Format?this.node.down("#download-ascii").checked="checked":"2"==this.DL_Format?this.node.down("#download-bibtex").checked="checked":"3"==this.DL_Format?this.node.down("#download-refworks").checked="checked":"4"==this.DL_Format?this.node.down("#download-endnote-procite-refman").checked="checked":this.node.down("#download-ascii").checked="checked";var a=this.node.up("div").id;if("popup-download-browse-citations_container"==a){var b=$("tocresultform").select("input[type='checkbox']"),c=b.collect(function(a){return a.checked?a.id:""});$("recordIds").value=c.join(" ").strip().gsub(" ",",")}else{var d=($("popup-email-document").up("div").down("#fromPage").innerHTML,$("popup-email-document").up("div").down("#recordId").innerHTML);d=j$.trim(d),$("recordIds").value=d}}});DownloadBrowseCitations.CONFIG={wrapper_id:"download-citations",ajax_href:"/jsp/personalization/userpref.jsp",DL_Format:"DL_Format",CIT_Format:"CIT_Format"};var ExportProjectListing=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.resultSize=parseInt(j$("#resultCount").html()),this.range_end_container=j$(this.CONFIG.range_end_container),this.stepInterval=this.CONFIG.stepInterval,this.resultCutOff=2e3,this.node=j$("#"+a),this.checked_label=this.CONFIG.checked_label,this.set_label=this.CONFIG.set_label,this.checked_items=j$(this.CONFIG.checked_items+" input:checked"),this.checkNum_container=j$(this.CONFIG.checkedNum_container),this.showContainer(this.checked_items.length>0?"checked":"set")},showContainer:function(a){"checked"==a?this.renderChecked(this.checked_items):"set"==a&&this.renderSet(this.stepInterval,this.resultSize)},toggleContainers:function(){j$("header h2").toggle(),j$(".export-container").toggle(),j$("#export-param2").val("")},renderSet:function(a,b){this.setExportParameters(this.set_label,"","1"),this.setExportSortType(j$("#sortType").val()),b>this.resultCutOff&&(this.range_end_container.html(this.resultCutOff),b=this.resultCutOff),this.range_end_container.html(b),this.buildSlider(a,b)},buildSlider:function(a,b){var c=this;j$("#result-end").html(b),this.setExportParameters(this.set_label,"",b),this.setExportSortType(j$("#sortType").val()),j$("#slider").slider({range:"min",min:0,max:b,step:a,value:b,slide:function(a,b){var d=j$("#range-end");b.value<1&&(b.value=1),d.html(b.value),c.setExportParameters(this.set_label,"",b.value)}})},renderChecked:function(a){var b=this;this.toggleContainers(),this.setARs(a),this.checkNum_container.html(a.length),a.length>1?this.node.find("#plural").show():this.node.find("#plural").hide(),j$("#switch-to-set").click(function(){b.toggleContainers(),b.renderSet(b.stepInterval,b.resultSize)})},setARs:function(a){var b=[],c="";j$.each(a,function(a,d){c=j$(d).attr("id"),b.push(c)}),this.setExportParameters(this.checked_label,b.join(),0),this.setExportSortType(j$("#sortType").val())},setExportParameters:function(a,b,c){var d=j$("#projectId").val();j$("#export-param1").val(d),b&&j$("#export-param2").val(b),j$("#export-param3").val(c)},setExportSortType:function(a){j$("#export-param4").val();j$("#export-param4").val(a)}});ExportProjectListing.CONFIG={wrapper_id:"export-project-listing",stepInterval:1,range_end_container:"#range-end",results_container:".value",set_container:"#set-container",check_container:"#checked-container",checked_items:"#MyProjDocuments .Results",checkedNum_container:"#check-num",checked_label:"ar",set_label:"bulkSetSize"};var ExportSearchResults=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.resultSize=parseInt(j$(this.CONFIG.results_container).html().split(" ")[0].trim().replace(/\,/g,"")),this.range_end_container=j$(this.CONFIG.range_end_container),this.stepInterval=this.CONFIG.stepInterval,this.resultCutOff=2e3,this.node=j$("#"+a),this.checked_label=this.CONFIG.checked_label,this.set_label=this.CONFIG.set_label,this.checked_items=j$(this.CONFIG.checked_items+" input:checked"),this.checkNum_container=j$(this.CONFIG.checkedNum_container),this.showContainer(this.checked_items.length>0?"checked":"set")},showContainer:function(a){"checked"==a?this.renderChecked(this.checked_items):"set"==a&&this.renderSet(this.stepInterval,this.resultSize)},toggleContainers:function(){this.node.find("h2").toggle(),this.node.find(".export-container").toggle()},renderSet:function(a,b){this.setExportParameters(this.set_label,"1"),b>this.resultCutOff&&(this.range_end_container.html(this.resultCutOff),b=this.resultCutOff),this.range_end_container.html(b),this.buildSlider(a,b)},buildSlider:function(a,b){var c=this;j$("#result-end").html(b),this.setExportParameters(this.set_label,b),j$("#slider").slider({range:"min",min:0,max:b,step:a,value:b,slide:function(a,b){var d=j$("#range-end");b.value<1&&(b.value=1),d.html(b.value),c.setExportParameters(this.set_label,b.value)}})},renderChecked:function(a){var b=this;this.toggleContainers(),this.setARs(a),this.checkNum_container.html(a.length),a.length>1?this.node.find("#plural").show():this.node.find("#plural").hide(),this.node.find("#switch-to-set").click(function(){b.toggleContainers(),b.renderSet(b.stepInterval,b.resultSize)})},setARs:function(a){var b=[],c="";j$.each(a,function(a,d){c=j$(d).attr("id"),b.push(c)}),this.setExportParameters(this.checked_label,b.join())},setExportParameters:function(a,b){var c=j$("#oqs").val();j$("#export-param").val(b+"&"+c).attr("name",a)}});ExportSearchResults.CONFIG={wrapper_id:"export-results",stepInterval:10,range_end_container:"#range-end",results_container:".results-returned",set_container:"#set-container",check_container:"#checked-container",checked_items:"#searchresult .Results",checkedNum_container:"#check-num",checked_label:"ar",set_label:"bulkSetSize"};
var DownloadSearchResultCitations=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.node=$(a),this.fetchUserPref()},fetchUserPref:function(){new Ajax.Request("/jsp/personalization/userpref.jsp",{method:"get",evalJSON:"force",onSuccess:this.fetchSuccessHandler.bind(this),onFailure:this.fetchFailureHandler.bind(this)})},fetchFailureHandler:function(){$(this.CONFIG.wrapper_id).setStyle({display:"none"})},fetchSuccessHandler:function(a){var b=a.responseText.evalJSON();this.DL_Format=b.DL_Format,this.CIT_Format=b.CIT_Format,this.renderLabels()},renderLabels:function(){"1"==this.CIT_Format?this.node.down("#citation-only").checked="checked":"2"==this.CIT_Format?this.node.down("#citation-abstract").checked="checked":this.node.down("#citation-only").checked="checked","1"==this.DL_Format?this.node.down("#download-ascii").checked="checked":"2"==this.DL_Format?this.node.down("#download-bibtex").checked="checked":"3"==this.DL_Format?this.node.down("#download-refworks").checked="checked":"4"==this.DL_Format?this.node.down("#download-endnote-procite-refman").checked="checked":this.node.down("#download-ascii").checked="checked";var a=this.node.up("div").id;if("popup-download-searchresult-citations_container"==a){var b=$("search_results_form").select("input[type='checkbox']"),c=b.collect(function(a){return a.checked?a.id:""});$("recordIds").value=c.join(" ").strip().gsub(" ",",")}else if("popup-download-myproject-citations_container"==a){var b=$("MyProjDocuments").select("input[type='checkbox']"),c=b.collect(function(a){return a.checked?a.id:""});$("recordIds").value=c.join(" ").strip().gsub(" ",",")}else{var d=($("popup-email-document").up("div").down("#fromPage").innerHTML,$("popup-email-document").up("div").down("#recordId").innerHTML);d=j$.trim(d),$("recordIds").value=d}}});DownloadBrowseCitations.CONFIG={wrapper_id:"download-citations",ajax_href:"/jsp/personalization/userpref.jsp",DL_Format:"DL_Format",CIT_Format:"CIT_Format"};var UserPreferences=Class.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.node=$(a),this.fetchUserPref()},fetchUserPref:function(){new Ajax.Request("/jsp/personalization/userpref.jsp",{method:"post",evalJSON:"force",onSuccess:this.fetchSuccessHandler.bind(this),onFailure:this.fetchFailureHandler.bind(this)})},fetchFailureHandler:function(){$(this.CONFIG.wrapper_id).setStyle({display:"none"})},fetchSuccessHandler:function(a){var b=a.responseText.evalJSON();return this.DL_Format=b.DL_Format,this.CIT_Format=b.CIT_Format,this.Email_Format=b.EMAIL_Format,this.Email_Address=b.EMAIL_Addr,this.Sort_Type=b.Sort_Type,this.ResultsPerPage=b.Result_Num,this.Results_Layout=b.Result_Layout,this.Search_Type=b.Search_Type,this.Return_Type=b.Return_Type,this.Save_History=b.Save_History,this.hideNonSubscribeContent=b.hideNonSubscribeContent,b.ERROR?($(this.CONFIG.wrapper_id).setStyle({display:"none"}),void alert("Error due to session expiration. PLEASE LOGIN AGAIN")):void this.renderLabels()},renderLabels:function(){"1"==this.CIT_Format?$("CIT_Format").down("#include-citation-only").checked="checked":"2"==this.CIT_Format?$("CIT_Format").down("#include-citation-abstract").checked="checked":$("CIT_Format").down("#include-citation-only").checked="checked","1"==this.DL_Format?$("DL_Format").down("#format-ascii").checked="checked":"2"==this.DL_Format?$("DL_Format").down("#format-bibtext").checked="checked":"3"==this.DL_Format?$("DL_Format").down("#format-refworks").checked="checked":"4"==this.DL_Format?$("DL_Format").down("#format-endnote").checked="checked":$("DL_Format").down("#format-ascii").checked="checked","plaintext"==this.Email_Format?$("Email_Format").down("#email_format_text").checked="checked":"html"==this.Email_Format?$("Email_Format").down("#email_format_html").checked="checked":$("Email_Format").down("#email_format_text").checked="checked",this.Email_Address&&($("EMAIL_ADDR").down("#email_address").value=this.Email_Address),"1"==this.Results_Layout?$("Results_Layout").down("#layout-title").checked="checked":"2"==this.Results_Layout?$("Results_Layout").down("#layout-title-citation").checked="checked":"3"==this.Results_Layout?$("Results_Layout").down("#layout-title-citation-abstract").checked="checked":$("Results_Layout").down("#layout-title").checked="checked","1"==this.Search_Type?$("Search_Type").down("#search-all-fields").checked="checked":"2"==this.Search_Type?$("Search_Type").down("#full-text-all-fields").checked="checked":$("Search_Type").down("#search-all-fields").checked="checked",null==this.Save_History&&(this.Save_History="Y"),$("N"==this.Save_History?"save-hist-N":"save-hist-Y").checked=!0,this.Return_Type.match("ALL")?($("return-search").down("#return-all").checked="checked",$("return-search").down("#return-ieee").checked="",$("return-search").down("#return-iet").checked="",$("return-search").down("#return-aip").checked="",$("return-search").down("#return-avs").checked="",$("return-search").down("#return-ibm").checked="",$("return-search").down("#return-vde").checked="",$("return-search").down("#return-tup").checked="",$("return-search").down("#return-biai").checked="",$("return-search").down("#return-mitp").checked="",$("return-search").down("#return-al-lucent").checked=""):(this.Return_Type.indexOf("IEEE")>-1&&($("return-search").down("#return-ieee").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("IET")>-1&&($("return-search").down("#return-iet").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("AIP")>-1&&($("return-search").down("#return-aip").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("AVS")>-1&&($("return-search").down("#return-avs").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("IBM")>-1&&($("return-search").down("#return-ibm").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("VDE")>-1&&($("return-search").down("#return-vde").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("TUP")>-1&&($("return-search").down("#return-tup").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("BIAI")>-1&&($("return-search").down("#return-biai").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("MITP")>-1&&($("return-search").down("#return-mitp").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("Alcatel-Lucent")>-1&&($("return-search").down("#return-al-lucent").checked="checked",$("return-search").down("#return-all").checked=""),this.Return_Type.indexOf("Morgan & Claypool")>-1&&($("return-search").down("#return-morgan-claypool").checked="checked",$("return-search").down("#return-all").checked="")),$("results_page").selectedIndex="10"==this.ResultsPerPage?0:"25"==this.ResultsPerPage?1:"50"==this.ResultsPerPage?2:"100"==this.ResultsPerPage?3:0;var a="#sort_by_"+this.Sort_Type;j$(a)?j$(a).attr("selected","selected"):$("sort_by").selectedIndex=0}});UserPreferences.CONFIG={wrapper_id:"search-preferences",ajax_href:"/jsp/personalization/userpref.jsp",DL_Format:"DL_Format",CIT_Format:"CIT_Format",Email_Format:"Email_Format",Email_Address:"Email_Address",Sort_Type:"Sort_Type",ResultsPerPage:"ResultsPerPage",Results_Layout:"Results_Layout",Search_Type:"Search_Type",Return_Type:"Return_Type",Save_History:"Save_History",hideNonSubscribeContent:"hideNonSubscribeContent"};var RelatedContent=Class.create(PageWidget,{initialize:function(a,b,c){this.node=$(a),this.node&&b&&(this.setOptions(c),this.initializeListElements(b))},initializeListElements:function(a){this.reference_list=$(this.CONFIG.references_list),this.citation_list=$(this.CONFIG.citations_list),this.fetchReferencesAndCitations(a)},fetchReferencesAndCitations:function(a){new Ajax.Request(this.CONFIG.ajax_request,{method:"get",evalJSON:"force",parameters:a,onSuccess:this.fetchSuccessHandler.bind(this),onFailure:this.fetchFailureHandler.bind(this)})},fetchSuccessHandler:function(a){a.responseJSON.title&&a.responseJSON.references&&a.responseJSON.citations?(this.json_references=a.responseJSON.references,this.json_citations=a.responseJSON.citations,this.updatePageTitle(a.responseJSON.title),this.loadReferencesAndCitations(),this.initializeScrollArrows(),this.initializeItemHovering(),this.initializePopupObservers()):this.fetchFailureHandler()},updatePageTitle:function(a){var b=$(this.CONFIG.document_title);b&&b.update(a)},loadReferencesAndCitations:function(){for(x=0;x<this.json_references.length;x++)this.createListItem(this.json_references[x],this.reference_list,x);for(x=0;x<this.json_citations.length;x++)this.createListItem(this.json_citations[x],this.citation_list,x)},createListItem:function(a,b){var c=new Element("LI").update("<span>"+a.title+"</span");b.insert({bottom:c})},fetchFailureHandler:function(){this.node.up().setStyle({display:"none"})},initializeScrollArrows:function(){var a=$(this.CONFIG.references_up_arrow),b=$(this.CONFIG.references_down_arrow),c=$(this.CONFIG.citations_up_arrow),d=$(this.CONFIG.citations_down_arrow);this.json_references.length>5?(a.observe("mouseover",this.arrowMouseOverHandler.bindAsEventListener(this,a)),b.observe("mouseout",this.arrowMouseOutHandler.bindAsEventListener(this,b)),a.observe("click",this.scrollingClickHandler.bindAsEventListener(this,this.reference_list,!0)),b.observe("click",this.scrollingClickHandler.bindAsEventListener(this,this.reference_list,!1))):(a.addClassName("Disabled"),b.addClassName("Disabled")),this.json_citations.length>5?(c.observe("mouseover",this.arrowMouseOverHandler.bindAsEventListener(this,c)),d.observe("mouseout",this.arrowMouseOutHandler.bindAsEventListener(this,d)),c.observe("click",this.scrollingClickHandler.bindAsEventListener(this,this.citations_list,!0)),d.observe("click",this.scrollingClickHandler.bindAsEventListener(this,this.citations_list,!1))):(c.addClassName("Disabled"),d.addClassName("Disabled"))},arrowMouseOverHandler:function(a,b){var c=b.up().down("UL"),d=c.cumulativeScrollOffset()[1];b.id.endsWith("up")?0==d?b.removeClassName("Hovering"):b.addClassName("Hovering"):d==b.up().down("UL").getHeight()?b.removeClassName("Hovering"):b.addClassName("Hovering")},arrowMouseOutHandler:function(a,b){b.removeClassName("Hovering")},initializeItemHovering:function(){this.node.select("LI").each(function(a){a.observe("mouseover",function(){a.addClassName("Hover")}),a.observe("mouseout",function(){a.removeClassName("Hover")})})},scrollingClickHandler:function(a,b,c){c?this.scrollUp(b.up()):this.scrollDown(b.up())},scrollUp:function(a){var b=a.cumulativeScrollOffset()[1];0!=b&&(a.scrollTop=b-76)},scrollDown:function(a){var b=a.cumulativeScrollOffset()[1];b!=a.getHeight()&&(a.scrollTop=b+76)},initializePopupObservers:function(){this.node.select("LI SPAN").each(function(a){a.observe("click",this.fetchItemDetails.bindAsEventListener(this,a))},this)},fetchItemDetails:function(a,b){var c=b.up("UL").id,d=b.up("LI").previousSiblings().length,e=c==this.CONFIG.references_list?"right-details":"left-details",f=c==this.CONFIG.references_list?this.json_references[d]:this.json_citations[d];this.displayItemDetailPopup(f,e)},displayItemDetailPopup:function(a,b){this.hideDetailPopups();var c=new Element("DIV",{"class":"content-details "+b}),d=new Template('<img class="close-details" src=ASSETS_RELATIVE_PATH+"/img/btn.close.gif" alt="Close"/><h2><a href="#{data.url}">#{title}</a></h2><p class="detail">#{authors}</p><p class="detail"><a href="#{publication_url}">#{publication_title}</a>, Volume #{volume_number}, Issue #{issue_number}, #{publication_date} Page(s) #{page_numbers[0]}-#{page_numbers[1]}</p><h3><a href="#{free_preview_url}">Free Preview</a>&nbsp;|&nbsp;<a href="#{related_url}">Related</a>&nbsp;|&nbsp;<a href="#{citations_url}">Cited by #{citations_number}</a></h3><h4>Abstract</h4><p>#{abstract}</p>');c.update(d.evaluate(a)),this.node.insert({bottom:c}).down(".close-details").observe("click",this.hideDetailPopups.bindAsEventListener(this))},hideDetailPopups:function(){this.node.select(".content-details").invoke("remove")}});RelatedContent.CONFIG={ajax_request:ASSETS_RELATIVE_PATH_NO_SERVER+"/html/related_content.json.php",document_title:"article-title",references_list:"references-list",references_up_arrow:"buttefly-references-up",references_down_arrow:"buttefly-references-down",citations_list:"citations-list",citations_up_arrow:"buttefly-citations-up",citations_down_arrow:"buttefly-citations-down"};var Revealer=Behavior.create(PageWidget,{initialize:function(a){return this.setOptions(a),this.nodes={},this.nodes.controller=this.element.down(this.CONFIG.controller_class),this.nodes.content=this.element.down(this.CONFIG.content_class),this.nodes.controller&&this.nodes.content?(this.CONFIG.hidden_by_default&&this.nodes.content.hide(),this.initializeCallback=this.CONFIG.initialize_callback.bind(this),this.controlCallback=this.CONFIG.control_callback.bind(this),this.nodes.controller.observe("click",this.revealerControlClickHandler.bindAsEventListener(this)),void this.initializeCallback()):void this.CONFIG.noRevealedContentCallback(this)},revealerControlClickHandler:function(){this.revealOrConcealContent(),this.controlCallback()},revealOrConcealContent:function(){this.CONFIG.effect?new Effect.toggle(this.nodes.content,"blind",this.CONFIG.effect_options):this.nodes.content.toggle()}});Revealer.CONFIG={controller_class:".RevealControl",content_class:".RevealContent",effect:!1,effect_options:{duration:.25},hidden_by_default:!0,initialize_callback:Prototype.emptyFunction,control_callback:Prototype.emptyFunction,noRevealedContentCallback:Prototype.emptyFunction},Event.addBehavior({"UL.tocResults LI.noAbstract":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){this.nodes.controller.writeAttribute("title","Click to Reveal Quick Abstract"),this.nodes.controller.down(0).writeAttribute("alt","Click to Reveal Quick Abstract"),this.nodes.controller.writeAttribute("href","#"),this.nodes.controller.writeAttribute("onClick","return false;")},control_callback:function(){this.nodes.controller.down(0).src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.expanded.gif",this.nodes.controller.down(0).alt=this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract",this.nodes.controller.writeAttribute("title",this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract")}}),".bodyCopyBlackLarge":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){this.nodes.controller.writeAttribute("title","Click to Reveal Quick Abstract"),this.nodes.controller.down(0).writeAttribute("alt","Click to Reveal Quick Abstract"),this.nodes.controller.writeAttribute("href","#"),this.nodes.controller.writeAttribute("onClick","return false;")},control_callback:function(){this.nodes.controller.down(0).src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.expanded.gif",this.nodes.controller.down(0).alt=this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract",this.nodes.controller.writeAttribute("title",this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract")}}),"UL.tocResults LI.showAbstract":Revealer({effect:!1,hidden_by_default:!1,initialize_callback:function(){this.nodes.controller.writeAttribute("title","Click to Reveal Quick Abstract"),this.nodes.controller.down(0).writeAttribute("alt","Click to Reveal Quick Abstract"),this.nodes.controller.writeAttribute("href","#"),this.nodes.controller.writeAttribute("onClick","return false;")},control_callback:function(){this.nodes.controller.down(0).src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.expanded.gif",this.nodes.controller.down(0).alt=this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract",this.nodes.controller.writeAttribute("title",this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract")}}),"UL.Results LI.noAbstract":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){this.nodes.controller.writeAttribute("title","Click to Reveal Quick Abstract"),this.nodes.controller.down(0).writeAttribute("alt","Click to Reveal Quick Abstract"),this.nodes.controller.writeAttribute("href","#"),this.nodes.controller.writeAttribute("onClick","return false;")},control_callback:function(){this.nodes.controller.down(0).src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.expanded.gif",this.nodes.controller.down(0).alt=this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract",this.nodes.controller.writeAttribute("title",this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract")}}),"UL.Results LI.showAbstract":Revealer({effect:!1,hidden_by_default:!1,initialize_callback:function(){this.nodes.controller.writeAttribute("title","Click to Reveal Quick Abstract"),this.nodes.controller.down(0).writeAttribute("alt","Click to Reveal Quick Abstract"),this.nodes.controller.writeAttribute("href","#"),this.nodes.controller.writeAttribute("onClick","return false;")},control_callback:function(){this.nodes.controller.down(0).src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.quick-abstract.expanded.gif",this.nodes.controller.down(0).alt=this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract",this.nodes.controller.writeAttribute("title",this.nodes.content.visible()?"Click to Reveal Quick Abstract":"Click to Close Quick Abstract")}}),"UL.Browsing LI.noAbstract":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#"),this.element.setStyle({position:"relative"});var b=new Element("span");this.element.insert({bottom:b}),b.addClassName("ArrowToggler"),b.observe("click",this.revealerControlClickHandler.bindAsEventListener(this))},control_callback:function(){this.nodes.controller.src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.view-details.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.view-details.expanded.gif",this.nodes.controller.up(".header").toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")},noRevealedContentCallback:function(a){var b=a.element.down(".header");b&&b.setStyle({background:"none"})}}),"UL.Browsing LI.showAbstract":Revealer({effect:!0,hidden_by_default:!1,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#")},control_callback:function(){this.nodes.controller.src=this.nodes.content.visible()?ASSETS_RELATIVE_PATH+"/img/btn.view-details.collapsed.gif":ASSETS_RELATIVE_PATH+"/img/btn.view-details.expanded.gif",this.nodes.controller.up(".header").toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")}}),"DIV.advanced-search .DHTML":Revealer({effect:!0,hidden_by_default:!1,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.addClassName("link"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#")},control_callback:function(){this.nodes.controller.up(".header").toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")}}),"ul.refinement LI.reveal .DHTML":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.addClassName("link"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#")},control_callback:function(){this.nodes.controller.up(".header").toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")}}),"DIV.box .DHTML":Revealer({effect:!0,hidden_by_default:!0,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.addClassName("link"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#"),$("refinement-open-1")&&($("refinement-open-1").addClassName("open").addClassName("link"),$("refinement-open-1").next("div").show()),$("refinement-open-2")&&($("refinement-open-2").addClassName("open").addClassName("link"),$("refinement-open-2").next("div").show()),$("refinement-open-3")&&($("refinement-open-3").addClassName("open").addClassName("link"),$("refinement-open-3").next("div").show())},control_callback:function(){this.nodes.controller.toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")}}),"div#index-terms":Revealer({effect:!1,hidden_by_default:!0,initialize_callback:function(){var a=new Element("span");this.nodes.controller.parentNode.insertBefore(a,this.nodes.controller.nextSibling),a.addClassName("visuallyhidden"),a.update("Click to Reveal"),this.nodes.controller.addClassName("link"),this.nodes.controller.writeAttribute("title","Click to Reveal"),this.nodes.controller.writeAttribute("href","#")},control_callback:function(){this.nodes.controller.toggleClassName("open"),this.nodes.controller.title=this.nodes.content.visible()?"Click to Reveal":"Click to Close",this.nodes.controller.next(".visuallyhidden").update(this.nodes.content.visible()?"Click to Reveal":"Click to Close")}})});var SelectAll=Behavior.create(PageWidget,{initialize:function(a,b){this.setOptions(b),this.checkbox_nodes=this.element.select('input[type="checkbox"]'),this.controls_container=$(a),this.checkbox_nodes.size()<1||!this.controls_container||(this.select_all_node=this.controls_container.down("."+this.CONFIG.select_class),this.deselect_all_node=this.controls_container.down("."+this.CONFIG.deselect_class),this.select_all_node&&this.deselect_all_node&&(this.select_all_node.observe("click",this.toggleAllSelections.bindAsEventListener(this,"checked")),this.deselect_all_node.observe("click",this.toggleAllSelections.bindAsEventListener(this,"")),this.controls_container.setStyle({display:"block"})))},toggleAllSelections:function(a,b){this.checkbox_nodes.each(function(a){a.checked=b})}});SelectAll.CONFIG={select_class:"SelectAll",deselect_class:"DeSelectAll"},Event.addBehavior({"UL.Results":SelectAll("toggle-all-checkboxes")}),Event.addBehavior({"UL.listview":SelectAll("toggle-all-checkboxes")}),Event.addBehavior({"UL.Results":SelectAll("toggle-all-checkboxes-bottom")});var SelectObserver=Behavior.create({initialize:function(){this.select_fieldset=this.element.up("FIELDSET"),this.select_form=this.select_fieldset.up("FORM"),this.select_fieldset&&this.select_form&&(this.select_fieldset.down("INPUT").setStyle({display:"none"}),this.element.observe("change",this.selectChangeHandler.bindAsEventListener(this)))},selectChangeHandler:function(){this.select_form.submit()}});Event.addBehavior({"#search-results-sort-by":SelectObserver});var TabSet=Behavior.create(PageWidget,{initialize:function(a){if(this.setOptions(a),!this.element.hasClassName(this.CONFIG.static_class)){this.tabs=[],this.element.select(this.CONFIG.tab_selector).each(function(a){this.tabs.push(new TabSet.Tab(a,this))},this);var b,c=window.location.search.substring(1),d=c.split("&"),e=d[0];e.blank()||(b=this.tabs.find(function(a){return a.element.href.getHash()==e})||this.tabs[0]),b||(b=this.tabs.find(function(a){return a.element.up().hasClassName("Active")})||this.tabs[0]),b&&b.activate(!0),this.initializeCallback=this.CONFIG.initialize_callback,this.initializeCallback()}}});TabSet.CONFIG={tab_selector:".TabNav A",tab_prefix:"tab_",active_class:"Active",static_class:"Static",initialize_callback:Prototype.emptyFunction},TabSet.Tab=Class.create({initialize:function(a,b){this.element=$(a),this.tab_set=b,this.node_target_id=this.element.href.getHash(),this.nav_node=this.element.up(),this.tab_node=$(this.tab_set.CONFIG.tab_prefix+this.node_target_id),a.observe("click",this.handleAnchorClick.bindAsEventListener(this))},handleAnchorClick:function(a){a.stop(),a.element().blur(),this.activate()},activate:function(a){var b=this.tab_set.CONFIG.active_class;(!this.nav_node.hasClassName(b)||a)&&this.tab_set.tabs.each(function(a){this.node_target_id==a.node_target_id?(a.nav_node.addClassName(b),a.tab_node.addClassName(b),a.tab_node.show()):(a.nav_node.removeClassName(b),a.tab_node.removeClassName(b),a.tab_node.hide())},this)}}),Event.addBehavior({".tabbed-content":TabSet({tab_selector:".tab-menu LI A",tab_prefix:"",active_class:"selected"}),"#highlights":TabSet({tab_selector:".pagination LI A",tab_prefix:"",active_class:"selected",initialize_callback:function(){var a=this.element.down(".footer");a&&a.setStyle({display:"block"})}})});var SLIDE_status,SLIDE_timeout,SLIDE_actual=0,SLIDE_speed=8e3,SLIDE_fade=2,SLIDE_count=0;Modal={submitForm:function(a){var b=$(a).action;return b=b+"?"+$(a).serialize(),j$.colorbox({href:b,scrolling:!1,opacity:.6,overlayClose:!1,close:""}),!1},show:function(a){var b=!1;-1!=a.indexOf("mwInstSignIn")&&(b="Modal"),j$.colorbox({className:b,href:a,scrolling:!1,opacity:.6,overlayClose:!1,close:""}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},showLegacyAccountTransition:function(a){j$.colorbox({href:a,scrolling:!1,opacity:.6,overlayClose:!1,close:""}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},showIframeInstSignIn:function(a){j$.colorbox({href:a,width:"680px",height:"320px",scrolling:!1,iframe:!0,opacity:0,overlayClose:!1,close:""}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},showIframeMemberSignIn:function(a){j$.colorbox({href:a,width:"730px",height:"500px",scrolling:!1,iframe:!0,opacity:0,overlayClose:!1,close:""}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},showIframeSignOut:function(a){j$.colorbox({href:a,width:"680px",height:"420px",scrolling:!1,iframe:!0,opacity:0,overlayClose:!1,close:""}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},refresh:function(a){var b=!1;-1!=a.indexOf("mwInstForgot")&&(b="Modal"),j$.colorbox({className:b,href:a,scrolling:!1,overlayClose:!1,overlayClose:!1,opacity:.6}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},refreshLegacyAccountTransition:function(a){j$.colorbox({href:a,scrolling:!1,overlayClose:!1,overlayClose:!1,opacity:.6}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},refreshIframe:function(a){j$.colorbox({href:a,scrolling:!1,iframe:!0,overlayClose:!1,overlayClose:!1,opacity:.6}),jQuery("#cboxContent").html('<a id="mdCloseButton" class="" href="javascript:Modal.hide()" title="Close this window"><i class="fa fa-lg fa-close"></i></a>')},hide:function(){j$.colorbox.close()},cancelIframe:function(){parent.j$.fn.colorbox.close()},closeAndSubmitForm:function(a){var b=j$("#"+a),c=b.attr("action"),d=b.serialize();return j$.post(c,d,function(a){j$.colorbox({html:a,scrolling:!1,opacity:.6,overlayClose:!0,close:""})}),!1},closeAndRefresh:function(){j$.colorbox.remove();var a=location.href;a.indexOf("guesthome")>-1&&a.indexOf("signout=success")>-1?(a=a.replace("?signout=success",""),void(location.href=a)):location.reload()},closeAndRedirectToUrl:function(a){void 0!=a&&""!=j$.trim(a)&&(j$.colorbox.remove(),void(location.href=a))}};var fixExpander=function(){var a=function(){var a=jQuery("#browse-title-hdr .is-selected"),b=a.parents(".RevealContent"),c=b.prevAll(".RevealControl");setTimeout(function(){b.slideDown(),c.attr("title","Click to Close").addClass("open")},2e3)};return{init:a}}();j$.subscribe("/article/saveNotesTags",function(a,b){if(!(!b instanceof jQuery)){var c=b.attr("action"),d=b.serialize();j$.ajax({type:"POST",url:c,data:d,beforeSend:function(){j$("#cboxLoadingGraphic").show()},complete:function(){j$("#cboxLoadingGraphic").hide(),Modal.hide()},error:function(){},success:function(a){if("success"===a.status){j$.publish("/article/notesAndTags",[a]),j$.publish("/project/tags",[a.summary_tags]),j$.publish("/mod/tags/sort",[j$("#tagSortType").find(":selected").val()]),j$("body").prepend('<div class="notify-overlay alert-message">Record updated successfully</div>');var b=j$(".notify-overlay"),c=b.width(),d=(j$(window).width()-c)/2;b.css("left",d),setTimeout(function(){b.fadeOut(500)},5e3)}}})}}),j$.subscribe("/article/notesAndTags",function(a,b){var c=j$("#recordId"+b.document_id),d="tags"in b?b.tags:[],e="note"in b?b.note:"",f="",g="";!d.length&&e.empty()?(f=Xplore.templates.notesAndTagsEmpty,g=f.replace("{{recordId}}",b.document_id)):(f=Xplore.templates.notesAndTags,g=f.replace("{{recordId}}",b.document_id).replace("{{note}}",e).replace("{{tags}}",d.join(", ")).replace("{{create_date}}",b.create_date_string).replace("{{update_date}}",b.update_date_string)),c.html(g);var h=c.find(".tags-data"),i=c.find(".notes-data"),j=[h,i];j$.each(j,function(a,b){b.html()||b.parents(".section").remove()}),Xplore.utils.highlightUpdate([c,c.find(".created"),c.find(".updated")],"#fffef2")}),j$.subscribe("/project/tags",function(a,b){Xplore.projects.tagsList.setTagsObj(b)}),Xplore.utils={highlightUpdate:function(a,b){var c="",d=b||"#db0",a=j$.isArray(a)?a:j$.makeArray(a);d.indexOf("#")<0&&(d="#"+d),j$.each(a,function(a,b){b=b instanceof jQuery?b:j$(b),c=b.css("background-color"),b.css("background-color",d).delay(1e3).animate({backgroundColor:c},2500)})}},Xplore.projects={tagsList:{tags:[],getTagsObj:function(){if(this.tags.length)return this.tags;
var a=this;j$.when(j$.post("/myprojects/getUserSummaryTagsAsJsonResponse")).then(function(b){return a.tags=b,b})},setTagsObj:function(a){this.tags=a}}},Xplore.templates={notesAndTags:'					<span class="options"> 					<a class="edit" href="javascript:loadEditProjectDocumentForm(\'/myprojects/mwDocumentEditView.jsp?documentId={{recordId}}\')">Edit Tags/Notes</a> 				</span> 				<ul class="info cf"> 					<li class="info-item created"> 						<span class="label">Created</span> 						<span class="value">{{create_date}}</span> 						<span class="divider">·</span> 					</li> 					<li class="info-item updated"> 						<span class="label">Updated</span> 						<span class="value">{{update_date}}</span> 					</li> 				</ul> 				<div class="section"> 					<span class="meta-label">Notes:</span> 					<span class="notes-data">{{note}}</span> 				</div> 				<div class="section"> 					<span class="meta-label">Tags:</span> 					<span class="tags-data">{{tags}}</span> 				</div>',notesAndTagsEmpty:'<a class="edit" href="javascript:loadEditProjectDocumentForm(\'/myprojects/mwDocumentEditView.jsp?documentId={{recordId}}\')" class="edit">Add Notes or Tags</a>',tagList:'<li> 			<a href="/myprojects/showDocumentListing.jsp?tagId={{recordId}}" class="active"> 			<span class="tag-name">{{tag_name}}</span> (<span class="tag-count">{{tag_count}}</span>)</a> 			</li>'},function(a){a.fn.overlabel=function(b){var c=a.extend({},a.fn.overlabel.defaults,b),d=this.filter("label[for]").map(function(){var b=a(this);b.css("display","inline");var d=b.attr("for"),e=b.siblings("#"+d);if(e){var f=a.meta?a.extend({},c,b.data()):c;b.addClass(f.label_class);var g=function(){b.css(f.hide_css)},h=function(){this.value||b.css(f.show_css)};return a(e).parent().addClass(f.wrapper_class).end().focus(g).blur(h).each(g).each(h),this}});return c.filter?d:d.end()},a.fn.overlabel.defaults={label_class:"overlabel-apply",wrapper_class:"overlabel-wrapper",hide_css:{"text-indent":"-10000px"},show_css:{"text-indent":"0px",cursor:"text"},filter:!1}}(jQuery),!j$.cookie("asNewFeatureSession")&!j$.cookie("asNewFeatureExpires")&"Author Search"==jQuery("#search-field .tools .search-toggle").html()&&j$("#search-field .tools .search-toggle").qtip({content:{title:{text:function(){return title='<span class="featureTitle">Author Search</span>New!'},button:"Close"},text:function(){return tipHtml='<div id="authorSearchNew"><p>Now powered by an extensive database of newly linked and normalized names, the new IEEE <em>Xplore</em> author search delivers markedly improved search results.</p><p>Select Author Search and type in an author name to retrieve a more complete result set.</p><a href="/Xplorehelp/Help_search_author.html">Learn more...</a></div>'}},position:{my:"left center",at:"right center",adjust:{resize:!0}},style:{width:"400px",classes:"qtip-newFeatureXplore",tip:{width:16,height:9}},show:{event:!1,ready:!0},hide:!1,events:{render:function(){j$("a.qtip-close").click(function(){j$.cookie("asNewFeatureSession","true",{path:"/"})}),j$(".qtip-content").after('<a title="Do not show this again" class="closeText">Do not show this again<span class="closeIcon">x</span></a>'),j$(".closeText").click(function(){j$(this).parents().find(".qtip").hide(),j$.cookie("asNewFeatureExpires","true",{expires:90,path:"/"})})}}});var DesktopReporting=function(){var a={fields:".form-group [id^=drp]",save:".js-save-info",error:".error"},b={getExpiry:function(){var a=new Date;return new Date(a.setDate(a.getDate()+30))},errorClass:"invalid",errorNode:"<span class='error'>This field is required.</span>",cookiePath:"/",cookieDomain:".ieee.org"},c=function(){jQuery(a.save).on("click",function(b){if(b.preventDefault(),jQuery(a.fields).prev(a.error).remove(),d()){if(e(),jQuery.urlParam("pdfRequest")){var c="/stamp/stamp.jsp?tp=&arnumber="+jQuery.urlParam("arnumber");Modal.closeAndRedirectToUrl(c)}Modal.hide()}return!1}),jQuery(a.fields).on("focus",function(){var c=jQuery(this);c.removeClass(b.errorClass).prev(a.error).remove()})},d=function(){var c=!0;return jQuery(a.fields).each(function(a,d){var e=jQuery(d);e.val()||(e.addClass(b.errorClass),e.before(b.errorNode),c=!1)}),c},e=function(){jQuery(a.fields).each(function(){var a=jQuery(this);jQuery.cookie(this.id,a.val(),{expires:b.getExpiry(),path:b.cookiePath,domain:b.cookieDomain})})},f=function(){c()};return{init:f}}();initEasyXdm();